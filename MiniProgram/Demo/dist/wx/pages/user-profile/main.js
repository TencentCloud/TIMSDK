require("../../common/manifest.js")
require("../../debug/GenerateTestUserSig.js")
require("../../common/vendor.js")
global.webpackJsonpMpvue([3],{"6i0Y":function(t,s){},BBly:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("5nAL"),a=e.n(i),n=e("MCpR");new a.a(n.a).$mount()},MCpR:function(t,s,e){"use strict";var i=e("bld3"),a=e("c5J8");var n=function(t){e("6i0Y")},o=e("ybqe")(i.a,a.a,n,null,null);s.a=o.exports},bld3:function(t,s,e){"use strict";var i=e("Xxa5"),a=e.n(i),n=e("exGp"),o=e.n(n),r=e("mvHQ"),c=e.n(r),l=e("Dd8w"),u=e.n(l),d=e("NYxO"),f=e("0xDb");s.a={data:function(){return{userProfile:{},isInBlacklist:!1}},computed:u()({},Object(d.c)({blacklist:function(t){return t.user.blacklist},myInfo:function(t){return t.user.myInfo}}),Object(d.b)(["isIphoneX"])),onLoad:function(t){var s=this,e=t.userID;t.groupID;e&&(this.blacklist.indexOf(e)>-1&&(this.isInBlacklist=!0),wx.$app.getUserProfile({userIDList:[e]}).then(function(t){s.userProfile=t.data[0]}))},onUnload:function(){this.userProfile={},this.isInBlacklist=!1},methods:{getRandomInt:function(t,s){return t=Math.ceil(t),s=Math.floor(s),Math.floor(Math.random()*(s-t))+t},videoCall:function(){var t={call_id:"",version:3,room_id:this.getRandomInt(0,42949),action:0,duration:0,invited_list:[]},s=c()(t),e=wx.$app.createCustomMessage({to:this.userProfile.userID,conversationType:"C2C",payload:{data:s,description:"",extension:""}});this.$store.commit("sendMessage",e),wx.$app.sendMessage(e)},sendCalling:function(){var t=this;return o()(a.a.mark(function s(){var e,i;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e=[t.myInfo.userID,t.$store.getters.toAccount],s.next=3,Object(f.b)(e);case 3:i=s.sent,t.$store.commit("setCalling",!0),t.$store.commit("setCallData",{isFromGroup:!1,action:"call",sponsor:t.myInfo.userID,to:t.$store.getters.toAccount,userIDList:e,avatarList:i,inviteData:{callType:2}}),wx.switchTab({url:"/pages/index/main"});case 7:case"end":return s.stop()}},s,t)}))()},sendMessage:function(){this.$store.dispatch("checkoutConversation","C2C"+this.userProfile.userID)},handleSwitch:function(t){t.mp.detail.value?this.addBlackList():this.deleteBlackList()},addBlackList:function(){var t=this;wx.$app.addToBlacklist({userIDList:[this.userProfile.userID]}).then(function(s){t.$store.commit("showToast",{title:"拉黑成功",icon:"none",duration:1500}),t.isInBlacklist=!0,t.$store.commit("setBlacklist",s.data)}).catch(function(){t.$store.commit("showToast",{title:"拉黑失败",icon:"none",duration:1500})})},deleteBlackList:function(){var t=this;wx.$app.removeFromBlacklist({userIDList:[this.userProfile.userID]}).then(function(s){t.$store.commit("showToast",{title:"取消拉黑成功",icon:"none",duration:1500}),t.$store.commit("setBlacklist",s.data),t.isInBlacklist=!1}).catch(function(){t.$store.commit("showToast",{title:"取消拉黑失败",icon:"none",duration:1500})})}}}},c5J8:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container"},[e("div",{staticClass:"info-card"},[e("i-avatar",{attrs:{"i-class":"avatar",src:t.userProfile.avatar,mpcomid:"0"}}),t._v(" "),e("div",{staticClass:"basic"},[e("div",{staticClass:"username"},[t._v(t._s(t.userProfile.nick||"未设置"))]),t._v(" "),e("div",{staticClass:"user-id"},[t._v("用户ID："+t._s(t.userProfile.userID))])])],1),t._v(" "),e("i-cell-group",{attrs:{"i-class":"cell-group",mpcomid:"2"}},[e("i-cell",{attrs:{title:"个性签名",mpcomid:"1"}},[e("div",{staticClass:"signature",slot:"footer"},[t._v("\n        "+t._s(t.userProfile.selfSignature||"暂无")+"\n      ")])])],1),t._v(" "),e("i-cell-group",{attrs:{"i-class":"cell-group",mpcomid:"4"}},[e("i-cell",{attrs:{title:"加入黑名单",mpcomid:"3"}},[e("switch",{attrs:{color:"#006fff",checked:t.isInBlacklist,eventid:"0"},on:{change:t.handleSwitch},slot:"footer"})])],1),t._v(" "),e("div",{staticClass:"action-list",style:{"margin-bottom":t.isIphoneX?"34px":0}},[e("button",{staticClass:"video-call",attrs:{eventid:"1"},on:{click:t.sendCalling}},[t._v("\n      音视频通话\n      "),e("div",{staticClass:"new-badge"},[t._v("NEW")])]),t._v(" "),e("button",{staticClass:"send-messsage",attrs:{eventid:"2"},on:{click:t.sendMessage}},[t._v("发送消息")])],1)],1)},staticRenderFns:[]};s.a=i}},["BBly"]);
[English](./update_log_EN.md) | 简体中文

# TIMSDK
## 7.9.5680 @2024.04.19 - 增强版
### SDK
- 修复置顶消息列表返回顺序错乱的问题
- 修复置顶消息 Tips 类型解析错误的问题
- 修复部分安卓手机日志写入失败的问题
- 修复从旧向新拉取群漫游消息，偶现拉取不全的问题
- 修复从话题拉取历史消息，偶现拉不到本地消息的问题
- 修复删除会话分组里的会话之后，再次登录又被激活的问题

## 7.9.5666 @2024.04.07 - 增强版
### SDK
- 新增 visionOS SDK，适配 Apple Vision Pro
- 群会话支持消息置顶
- 新增在免打扰时接受群内 @ 提醒离线通知的功能
- 支持在“接受好友申请”接口中设置好友备注
- 增加处理邀请进群的通知
- TIMPush 升级 vivo 推送包版本
- TIMPush 解决 OV 机型偶现崩溃问题
- TIMPush 增加 OfflinePushExtInfo 支持推送透传特性
- 修复断网后重新上线没有收到被踢通知的问题
- 修复在登录回调中立即加入直播群，偶现接收不到群消息的问题
- 修复收到删除会话回调后仍然可以收到会话变更回调问题
- 修复偶现消息中的本地数据被重置的问题
- 修复拉历史消息时频繁触发 onRecvMessageModified 回调的问题
- 修复 Swift 部分接口无返回值和不支持可选值的问题
- 修复相同 AppleID 不同类型的设备之间因为 iCloud 同步后导致的多端登录异常的问题
- 修复社群和话题的相关问题
- 修复鸿蒙平台拉取历史消息失败的问题
- Windows 平台升级 libcurl 8.4.0
- C++ 接口修复合并转发消息的摘要重复的问题
- C++ 接口修复无法下载大图的问题
- C++ 接口修复群类型错误的问题
- C++ 接口修复无法设置消息自定义数据的问题
- C++ 接口修复转发消息失败的问题

### TUIKit & Demo
- iOS 组件提供 PrivacyInfo.xcprivacy 隐私清单文件
- TUIChatBot 插件支持 markdown 文本展示
- TUIChat 聊天页面上方支持显示通话情况

## 7.8.5505 @2024.03.01 - 增强版
### SDK
- iOS 和 Mac 增加 PrivacyInfo.xcprivac 隐私文件
- 修复 C++ SDK 无法设置 localCustomData 的问题
- 修复 swift SDK 位置消息数据类型错误问题
- 修复偶现的拉取历史消息触发“消息更新”回调问题
- 修复话题 at 消息异常问题
- 修复社群和话题列表拉取异常问题
- 修复其他稳定性问题

## 7.8.5483 @2024.02.01 - 增强版（Android 为 7.8.5484）
### SDK
- 支持鸿蒙平台
- 支持龙芯架构
- 发布 TIMPush-UniApp
- FCM 推送支持透传消息
- 优化推送注册及上报逻辑
- 新增社群话题的权限组功能
- 新增陌生人的关注/粉丝功能
- 支持配置云端消息审核策略
- 支持删除账号
- 话题资料支持获取 readSequence 字段
- 修复删除了本地插入的一条群消息后，再接收一条新的消息没有更新未读数的问题
- 修复用户同时订阅多个公众号后，SDK 偶现不回调的问题
- 修复发送公众号消息前后 msgID 不一致的问题
- 修复偶现的订阅会话分组未读数后不回调的问题
- 修复话题的创建时间获取异常问题
- 修复加入社群前后分别拉取话题资料，其未读数不变的问题
- 修复话题资料更新的通知消息类型错误的问题
- 修复某种条件下可以搜索到撤回状态消息的问题
- 修复 onApplicationProcessed 重复回调问题

### TUIKit & Demo
- 新增 TUIEmojiPlugin 插件，支持表情回应功能
- 支持在 TUIChat 中添加和显示 gif 动态表情
- TUIChat 内置的小表情包升级为新版黄脸表情
- 修复 iOS 端点击图片消息黑屏的问题

## 7.7.5294 @2023.12.27 - 增强版
### SDK
- 优化 Room 会控 的逻辑
- 解决本地会话不存在时，SDK 收不到会话从分组删除通知的问题
- 解决当会话最后一条消息是撤回状态时，仍然能被搜索到的问题
- 解决直播群消息被第三方回调修改后，消息发送者收不到消息变更回调的问题
- 修复日志模块偶现的稳定性问题
- 优化社群话题未读数逻辑

## 7.7.5282 @2023.12.18 - 增强版
### SDK
- 新增 V2TIMCommunityManager 和 V2TIMCommunityListener，整合社群话题类接口
- SDK 支持 Quic 和高级加密插件
- 优化会话的过滤逻辑
- 话题资料增加 createTime 字段
- 直播群支持设置管理员和拉取管理员列表
- 本地内容审核的正则表达式默认忽略英文大小写
- 修复偶现的 jni 问题
- 修复偶现的弱网发送消息回调错误的问题
- 修复偶现的群 tips 消息 intValue 改变的问题
- 修复 Android 端 SDK 搜索英文问号失败的问题


### TUIKit & Demo
- 新增智能聊天机器人 ChatBot 插件，支持“常见问题”问答形式，支持流式文本消息展示
- TUIKit 适配 Gradle 8.0 
- 简化 TUIKit 组件初始化步骤，增加组件依赖配置
- TUIChat 支持在 RoomKit 中半屏横屏显示
- TUIChat 支持添加消息点击长按等事件监听器
- 优化 TIMPush 插件
- 优化客服插件体验
- 优化语音消息点击效果

## 7.6.5011 @2023.11.03 - 增强版
### SDK
- 新增公众号功能
- 在线状态支持返回终端类型
- 发文本、图片消息被安全打击后本地保存安全打击状态
- C 接口层的会话信息补充会话头像和群组具体类型
- 优化消息发送失败状态以及重发逻辑
- 优化消息回应无网络下的拉取逻辑
- 修复跨站切换 sdkappid 偶现连网失败的问题
- 修复被挤下线后，仍然可以云端搜索的问题

### TUIKit & Demo
- 新增推送插件，控制台支持查看统计指标数据，支持排查工具
- 新增开源客服插件 TUICustomerServicePlugin
- TUIChat 发送语音消息增加 60 秒倒计时
- TUIChat 使用新的撤回接口，支持显示撤回操作者
- 优化被安全打击的图片/视频/音频的显示

## 7.5.4864 @2023.10.13 - 增强版
### SDK
- 修复拉取历史消息偶现无回调的问题
- 修复本地消息偶现丢失的问题
- 修复消息回应状态偶现不准的问题
- 优化 SDK 被踢后的自动登录逻辑
- 
## 7.5.4852 @2023.09.27 - 增强版
### SDK
- 增加禁言整个群的接口
- 消息回应增加自己是否回应标记字段
- 优化漫游消息的拉取
- 社群支持标记群成员
- C API 头文件优化
- 修复消息回应本地存储偶现异常的问题
- 修复消息撤回时，会话 lastMessage 的撤回信息为空的问题
- 修复接收好友消息时，消息发送者备注为空的问题
- 修复只清空群聊未读时，也会清空单聊未读的问题
- 修复断网期间收到的群消息，没有回调 onRecvNewMessage 的问题
- 修复服务器搜索偶现的崩溃问题
- 修复话题资料在断网重连再拉取后的未读数没更新的问题
- 修复设置会话最后一条消息的自定义数据后，会话的 LastMessage 未更新问题
- 修复 windows 端接收清空未读通知时出现的 crash 问题
- 修复使用 Swift 接口查询会话列表时，传入 Int.max 后引起的崩溃问题

### TUIKit & Demo
- TUIKit 支持 RTL 语言
- TUIChat 的语音播放支持手动切换听筒和扬声器
- 新增语音识别插件 TUIVoiceToText
- 优化文件下载
- 已读上报替换最新的 cleanConversationUnreadMessageCount 接口

## 7.4.4661 @2023.09.08 - 增强版
### SDK
- 修复一键清空未读引起的异常
- 修复云端消息搜索时偶现的异常

## 7.4.4655 @2023.09.01 - 增强版
### SDK
- 长连接优化服务器防孤岛逻辑
- 长连接优化 HTTP 选路逻辑
- 优化历史消息的拉取逻辑
- 完善会话分组模块的系统日志
- 修复群会话偶现未读数不准确的问题
- 修复社群话题偶现未读数不准确的问题
- 修复偶现收不到会话分组创建通知的问题

## 7.4.4643 @2023.08.11 - 增强版
### SDK
- 支持订阅用户和取消订阅用户
- 支持表情回复
- 支持语音转文字能力
- 支持在直播群里撤回消息
- 支持设置全局消息接收选项
- 单条转发消息支持富媒体资源自动续期
- 语音、视频消息支持安全打击后通知
- 消息撤回支持“撤回原因”+“撤回者”
- 修复单聊会话最后一条消息的已读状态不准的问题
- 修复删除好友后会话中好友备注信息未及时清空问题
- 优化 SQLite 文件损坏的处理

### TUIKit & Demo
- 支持会话分组信息存储在云端
- iOS 优化视频发送流程
- Android 修复连续语音消息自动播放失败的问题
- Android 修复通话记录列表时间显示错误的问题
- Android 修复 Chat 简约版消息列表 Item 概率出现重叠的问题

## 7.3.4358 @2023.06.21 - 增强版
### SDK

- 支持服务器消息搜索
- 支持按照是否含有未读消息过滤会话列表和会话未读总数
- 支持按照是否含有 @消息过滤会话列表和会话未读总数
- 获取群成员列表接口，增加群成员在线标识
- 所有类型的群都支持获取在线人数
- 优化从后台切换到前台时的重连速度
- 优化弱网时拉取本地消息缓慢问题
- 修复标记加群申请已读后，拉取加群申请列表缺失问题
- 修复发送第一条消息给非好友的账号，拉取不到会话问题
- 修复切换账号登录偶现对方会话个人资料为前一个账号资料的问题
- 修复拉取历史消息偶现本地字段消失问题
- 修复 iOS 偶现不抛出信令通知的问题
- 修复一键清空未读数后，会话未读数回调不生效问题
- 修复删除或重命名会话分组后，会话更新回调里的会话对象没有 showName、faceUrl 、lastMessage 信息的问题
- 修复对于本地不存在的会话，会话标记和会话分组信息变更通知会被丢弃的问题
- 修复删除会话偶现清空消息数据库的问题
- 修复 SDK 与用户代码发生符号冲突的问题

### TUIKit & Demo
- 支持多会话分组和会话标记
- 新增快速会议功能
- 语言消息支持自动播放下一条语音
- 图片视频查看支持缩小放大以及自适应横竖屏
- 图片视频上传下载支持显示进度
- 图片视频消息支持多选发送
- 群资料页面支持修改邀请选项
- iOS 发送图片支持增加后缀名

## 7.2.4146 @2023.05.12 - 增强版
### SDK

- 修复登录成功之前获取会话列表返回失败的问题
- 修复偶现无法清掉群会话未读数的问题
- 修复同步会话列表时，偶现没有更新群会话最后一条消息的问题
- 修复当包含不计未读的群消息时，一端对群会话做已读上报不能同步到其它端的问题
- 修复离线期间修改会话最后一条消息，重新登录后无法同步到最新消息的问题
- 修复向会议群里发送不计未读的群消息必现失败的问题
- 修复根据过滤条件获取会话未读总数偶现失败的问题
- 修复拉取历史消息时，偶现丢失消息本地字段的问题
- 修复打包 MAC 重命名 SDK 提示签名失败的问题

### TUIKit & Demo
- 修复海外版 TUIKit 相关体验问题

## 7.2.4123 @2023.04.25 - 增强版
### SDK

- 话题支持清空消息
- 增加会话被删除的回调
- 优化登录后同步会话列表的速度
- 在普通群和社群内踢人支持封禁
- 本地内容审核针对西欧字母系语言支持分词检查
- 社群支持设置申请入群和邀请入群的审批选项
- Android 离线推送支持 vivo 手机消息二级分类
- 直播群支持云控配置消息长轮询任务的数量
- 单聊已读上报禁止回退已读时间戳
- 群聊已读上报的 sequence 不能超过群最后一条消息的 sequence
- Android 离线推送适配华为、小米、FCM 的 Android 12 系统
- 修复自己发送的群消息缺少群名片字段的问题
- 修复编辑消息成功后偶现不触发消息变更回调的问题
- 修复被踢出群会重复回调 onMemberKicked 的问题
- 修复 Swift 版本消息多 element 解析异常的问题
- 修复特定条件下拉取群消息无回调问题
- 修复撤回消息后偶现未读数更新不及时的问题
- 修复 Android C/C++ 版本偶现 openssl 崩溃的问题

### TUIKit & Demo

- 新增历史通话记录页面
- 消息翻译支持设置目标语言
- TUIChat 新增消息撤回时间配置选项
- 修复在简约版下使用某些第三方输入法发送消息时，点击回车无响应的问题

## 7.1.3925 @2023.03.07 - 增强版

### SDK

- 群组支持按 sequence 列表拉取历史消息
- 删除会话支持设置是否清空历史消息
- 提供批量删除会话的接口
- 支持修改邀请进群的审批方式
- 社群支持群计数器
- 消息对象增加是否不过内容审核的参数
- 单聊已读上报支持按照消息时间戳上报
- 群聊已读上报支持按照消息 sequence上报
- 单聊会话暴露已读消息的时间戳
- 群聊会话暴露已读消息的 sequence
- 优化由于本地审核被拒绝发送的消息不会保存在本地消息数据库的问题
- 修复在群里发送不计未读消息时，离线群成员重新登录后会有未读数的问题
- 修复删除单聊会话后重新收发消息，消息的 isRead 状态偶现不准确的问题
- 修复多端登录场景下单聊会话未读数偶现不一致的问题
- 修复文件上传失败时偶现的崩溃的问题
- 将枚举V2TIMGroupApplicationGetType 变更为 V2TIMGroupApplicationType
- 将 V2TIMGroupApplication 的 getType 属性名称变更为 applicationType


### TUIKit & Demo

- 支持群投票和群接龙
- 完善简约版主题界面
- 优化信令消息的展示逻辑

## 7.0.3754 @2023.01.06 - 增强版

### SDK

- 所有消息类型都可支持 @ 群成员
- 支持按照会话的 filter 获取未读总数
- 普通群和直播群支持群计数器 meta counter
- 支持文本消息翻译
- 社群支持群自定义属性
- 离线推送支持华为的 category 和小米的 channel ID 设置
- 优化 quic 断网重连逻辑
- Cos 富媒体文件下载增加兜底 IP 逻辑
- Windows 平台发送富媒体消息文件路径兼容 emoji 特殊字符
- Windows 平台 C++ SDK 日志和初始化路径兼容 emoji 特殊字符
- 修复 v7a 架构下，设置会话自定义标记失败问题
- 修复缩略图和大图的高度赋值错误问题

### TUIKit & Demo

- TUIChat 语音消息的录制支持音量增益和 AI 降噪
- TUIChat 增加消息翻译的能力 
- Android FCM 推送支持自定义铃音
- iOS 平台下 TUIChat 加载历史消息性能优化

## 6.9.3557 @2022.11.29 - 增强版

### SDK

- 修复 Android 从消息中获取 V2TIMOfflinePushInfo 内容偶现的崩溃问题
- 修复 Android 增强版 pro 偶现的崩溃
- 完善 C 接口 TIMConvGetConvList 返回的 json 数据内容


### TUIKit & Demo

- 发布全新的简约版主题，更加符合国际化 App 的风格


## 6.8.3374 @2022.11.14 - 增强版

### SDK

- 支持客户端本地文本审核
- 发布 Swift 版本 SDK
- 支持普通群的群属性功能
- 优化普通群有人进出后，群成员人数的更新逻辑
- 优化 cos 上传流程
- 优化社群中消息撤回等操作后的未读数计算问题
- 修复单独设置好友自定义字段不会下发通知的问题
- 修复群监听回调两次的问题
- 修复退出并再次进入同一个社群后，社群下的话题资料没有及时更新的问题
- 修复插入本地消息成功后的回调中，消息对象头像为空的问题
- 修复重复登录设置消息扩展偶现报错的问题
- 修复标记所有会话已读后，会话更新回调中消息已读不更新的问题
- 修复在登录回调后立即发消息，消息的 send_user_id 偶现为空的问题
- C++ API 添加判断消息是否已读的接口
- C++ API 修复分页拉取会话列表的结果中游标不更新的问题

### TUIKit & Demo

- 修复 iOS16 长按文本消息，弹出搜索网页弹窗的问题
- TUIChat-iOS 支持发送 gif 图片
- TUIChat-iOS 修复图片发送状态异常的问题
- TUIChat-iOS 删除消息支持同时删除时间
- 修复 iOS TUIOfflinePush 引起的系统异常等问题
- 修复 Android TUIOfflinePush 推送参数设置不生效问题


## 6.7.3184 @2022.09.29 - 增强版

### SDK

- 支持消息扩展
- 支持信令编辑
- iOS 离线推送支持 VoIP
- Android 离线推送支持荣耀手机
- 接入层增加备份域名
- 修复特殊网络环境下，无法执行登录、登出回调的问题
- 修复设置群简介为空没有触发通知回调的问题
- 修复群会话免打扰状态在退群再加群后没有更新的问题
- 修复发送单聊消息已读回执时崩溃的问题
- 修复 C 接口 SDK 发送单聊消息已读回执无效的问题
- PC 端修复 TIMGroupModifyGroupInfo 无法修改组合群属性问题

### TUIKit & Demo

- 创建群聊流程优化
- 支持在聊天区域设置背景图片
- 优化换肤逻辑
- 群组通话过程中支持邀请群成员加入
- Android 支持动态表情
- Android 修复消息列表中偶现消息缺少的问题
- Android 修复消息列表中偶现消息发送状态错误的问题
- Android 修复离线推送组件多次获取手机型号的问题
- iOS TUICore 取消针对 UIAlertController 的全局样式修改
- iOS 新增拍摄中跳转图库功能
- iOS 修复清空所有消息后，点击小舌头崩溃的问题

## 6.6.3002 @2022.08.18 - 增强版

### SDK

- 支持直播群标记群成员
- 支持直播群踢人
- 修复 Android 话题更新回调偶现的崩溃问题
- 修复加群选项变更的通知枚举值不正确的问题
- 修复话题设置自定义字段之后没有收到  onTopicInfoChanged  监听回调的问题
- 优化 Android 多次获取网络 ip 的问题

### TUIKit & Demo

- 支持标记会话未读/已读、隐藏会话、折叠免打扰的群会话
- TUICallKit 替换旧版 TUICalling
- TUICallKit 音视频通话支持悬浮窗
- 支持动态开关群九宫格头像
- TUIChat 支持自定义背景图片
- 优化 Android TUIOfflinePush 组件支持通知栏点击事件回调应用，支持uniapp 原生插件打包
- Android 端 TUIKit 支持"社群-分组-话题"三级结构的社群模式
- iOS 输入框可以支持显示表情
- 支持不同群类型对应不同默认头像
- Demo 增加常驻安全提示
- 修复 TUICore 换肤组件中使用 WebView 导致的兼容性和合规性问题
- 修复点击离线推送进入聊天界面概率性出现重复消息的问题

## 6.5.2816 @2022.07.29 - 增强版

### SDK

- 优化印度站选路策略
- 优化富媒体消息上传/下载进度回调
- 优化 Android 端获取设备进程信息的合规问题
- 修复连续创建话题 crash 的问题
- 修复 Windows 发包偶现 crash 的问题
- 修复 Android v7a  架构下拉黑好友，再次添加被拉黑好友 crash 的问题

## 6.5.2803 @2022.07.15 - 增强版

### SDK

- 新增[会话标记](https://cloud.tencent.com/document/product/269/77389)支持
- 新增[会话分组](https://cloud.tencent.com/document/product/269/77392)支持
- 新增会话自定义字段支持
- 新增[拉取会话高级接口](https://cloud.tencent.com/document/product/269/75366#.E8.8E.B7.E5.8F.96.E4.BC.9A.E8.AF.9D.E5.88.97.E8.A1.A8.E9.AB.98.E7.BA.A7.E6.8E.A5.E5.8F.A3)
- 支持接收直播群广播消息
- 支持加群选项变更的通知下发
- 支持群消息接收选项变更的多端同步
- 优化长连接选路逻辑，支持策略轮转
- 预埋日本站支持
- 升级 HttpDNS 选路请求的授权 ID
- 国际站支持 HttpDNS 选路方式
- 优化直播群长轮询请求的起始 Sequence
- 优化话题资料中 lastMessage 在某些条件下的缺失问题
- 优化会话置顶顺序逻辑
- 优化消息端到端时间的统计逻辑
- 修复重发失败的消息导致历史消息里偶现重复消息的问题
- 修复在低版本手机上发送 emoj 表情显示乱码的问题
- 修复 onRecvMessageModified 返回的消息中 faceURL 为空的问题
- 修复登录后偶现收不到离线期间的群邀请信令的问题


### TUIKit & Demo

- C2C 单聊支持“正在输入中......”
- 会话和通讯录增加好友在线状态功能
- 发送的消息超过2分钟后，不再显示“撤回”选项
- 多端自定义消息互通兼容
- Android 解决特定场景下会话不重排的问题
- 离线推送组件移除 TPNS 通道


## 6.3.2619 @2022.06.29 - 增强版

### SDK

- 修复获取话题列表偶现的崩溃问题
- 修复删除话题后，获取会话列表异常问题


## 6.3.2609 @2022.06.16 - 增强版

### SDK

- 新增在线状态及自定义状态
- 直播群支持拉取群成员列表，最大支持1000人
- 话题支持 at all 消息
- 补充好友资料中添加好友的时间
- 修复跨平台版本 sql 执行错误问题
- 跨平台 SDK 增加社群话题相关接口
- 修复登录后拉取指定话题偶现的未读数不对的问题
- 修复没有网络时，获取加入的群组接口调用结果偶现为空的问题
- 修复获取加入的群组中群主 userID 为空的问题
- 修复转让群主后，新群主获取成员资料中的角色没更新问题
- 修复搜索消息接口参数填多个发送者时的搜索结果异常问题
- 修复搜索消息后，发送者昵称和头像不一致问题
- 修复修改 cloudCustomData 为空字符串不生效问题
- iOS 修复更改语音消息 cloudCustomData 后获取到的 elemType 为 0 的问题
- iOS 修复 C2C 消息已读回执偶现不回调问题
- Android 优化 so 加载速度

### TUIKit & Demo

- 聊天消息支持表情回应
- 聊天消息支持引用
- 聊天消息支持回复
- 单聊消息支持已读回执
- 会话列表时间统一格式化显示
- Demo App 支持版本升级检测
- Demo App 品牌 logo 升级


## 6.2.2363 @2022.04.29 - 增强版

### SDK

- 新增社群话题功能（[iOS 文档](https://cloud.tencent.com/document/product/269/44495#.E7.A4.BE.E7.BE.A4.E8.AF.9D.E9.A2.98) ，[Android 文档](https://cloud.tencent.com/document/product/269/44494#.E7.A4.BE.E7.BE.A4.E8.AF.9D.E9.A2.98)）
- 新增消息编辑接口（[iOS 文档](https://cloud.tencent.com/document/product/269/44490#.E6.B6.88.E6.81.AF.E5.8F.98.E6.9B.B4) ，[Android 文档](https://cloud.tencent.com/document/product/269/44489#.E6.B6.88.E6.81.AF.E5.8F.98.E6.9B.B4)）
- 支持 C2C 消息已读回执（[iOS 文档](https://cloud.tencent.com/document/product/269/44490#.E6.B6.88.E6.81.AF.E5.B7.B2.E8.AF.BB.E5.9B.9E.E6.89.A7) ，[Android 文档](https://cloud.tencent.com/document/product/269/44489#.E6.B6.88.E6.81.AF.E5.B7.B2.E8.AF.BB.E5.9B.9E.E6.89.A7)）
- 优化国际站的联网质量
- 修复消息已读后，卸载重装再拉取该消息，已读状态为未读的问题
- 修复获取非好友用户资料，其自定义字段值修改为空字符串后一直不更新的问题
- 修复 C2C 会话双方同时发消息时偶现的会话 lastMsg 与历史消息的 lastMsg 不一致的问题
- 修复 Public 群组群主审批通过入群申请后，申请方收到的回调错误问题
- 修复查看自己发送的群消息中 nameCard 为空的问题
- 修复某些条件下发送消息，会话列表不会重新排序的问题

### TUIKit & Demo

- 新增离线推送组件，简化接入流程
- 支持群消息已读回执
- iOS 支持暗黑皮肤
- Android 修复发送尺寸特别大的图片后，预览会崩溃问题
- Android 修复发送视频消息后，消息展示的时间跟实际播放时间不一致的问题
- Android 修复处理一个好友请求后，无法继续点击处理其他好友请求的问题

## 6.1.2166 @2022.04.02 - 增强版

### SDK

- 修复搜索本地消息 senderUserIDList 传入两个及以上时，搜索不到数据的问题
- 修复 rest api 一次性撤回多条消息，Android sdk 只回调了一条的问题
- windows 修复一键清除未读偶现崩溃问题

### TUIKit & Demo

- 发布国际版体验 Demo
- 离线推送切回厂商通道
- 手机号码登录切换到 aPaas
- 修复音视频通话多端同步的问题

## 6.1.2155 @2022.3.18 - 增强版

### SDK

- 支持群消息已读回执（[iOS 文档，](https://cloud.tencent.com/document/product/269/44490#.E7.BE.A4.E6.B6.88.E6.81.AF.E5.B7.B2.E8.AF.BB.E5.9B.9E.E6.89.A7) [Android 文档](https://cloud.tencent.com/document/product/269/44489#.E7.BE.A4.E6.B6.88.E6.81.AF.E5.B7.B2.E8.AF.BB.E5.9B.9E.E6.89.A7)）
- 安卓离线推送支持设置声音提示
- 移动端 SDK 提供设置网络代理的接口
- C/C++ 平台补齐离线推送接口
- 支持登录后自动同步群内信令消息
- 修改收到好友自定义字段变更通知后，无法获取完整自定义字段的问题
- 修改弱网下拉取会话列表偶现消息免打扰标志返回错误的问题
- 优化日志打印逻辑
- 优化错误信息描述

### TUIKit
- 完成 TUIKit Demo 个保法改造，满足合规
- 修复收到离线推送通知后，点击通知栏提示无法拉起音视频通话的问题
- 修复 App 退后台后收到离线推送通知，直接启动 App 无法拉起音视频通话的问题

## 6.0.1992 @2022.02.09 - 增强版

### SDK
- 修复向已解散或不存在的群连续发送两次消息偶现 crash 问题

### TUIKit

- 新增皮肤设置能力
- 新增语言设置能力
- 群资料卡新增群管理功能
- 文件消息增加上传下载动画
- 浏览历史消息时，增加“收到 X 条新消息”的小舌头跳转
- 浏览历史消息时，增加“回到最新位置”的小舌头跳转
- 增加一键跳转到群 @ 消息的小舌头跳转
- 优化会话列表最后一条消息的展示样式
- 文本消息增加选中状态
- 优化 A2、D2错误提示描述
- iOS15系统UI适配

## 6.0.1975 @2022.01.14 - 增强版

### SDK

- 发布全平台 C++ 接口版 SDK
- 离线推送支持接入 TPNS 通道
- 增加个人资料自定义字段的变更通知
- 修复获取好友备注偶现为空的问题
- 优化网络类型日志打印
- iOS 版本消息对象补齐消息优先级 priority 字段
- 修复 C 接口版本插入本地消息的回调没有返回完整消息对象的问题 
- 官方 TUIKit 开源 Demo 的离线推送切换到 TPNS 通道

## 5.9.1886 @2021.12.31 - 增强版

### SDK

- 修复登录同步 C2C 未读消息后回调的未读消息不全的问题
- 修复拉取本地消息返回不全的问题
- Linux 平台，解决 https 请求报错的问题
- C 接口版本，解决查询不到好友自定义字段的问题
- 优化网络层的错误码描述

### TUIKit & Demo
- 图片视频消息展示支持左右滑动查看
- 撤回消息支持重新编辑
- 音视频通话的信令消息，支持点击回拔 
- 会话列表显示最后一条消息的发送状态
- 删除消息增加“确认删除”的弹窗提示
- Android Demo 修复荣耀手机没有离线推送问题
- Android 修复当前会话的消息转发给第三人并被已读后，误更新当前会话消息的已读状态问题
- Android 修复音视频通话成员数超过9个时的崩溃问题。
- Android TUI 组件 minSdkVersion 统一为 16
- iOS 优化视频录制后发送的速度
- iOS 优化视频封面黑帧的问题

## 5.9.1872 @2021.12.20 - 增强版

### SDK

- 支持发送群内定向消息
- 支持 cos 下载鉴权
- 长连接加密通道增加 AES 支持
- 连网逻辑增加接入点防孤岛的支持
- cos 文件上传下载并发数支持后台配置
- 双栈网络可以配置优先使用 IPV6
- 支持印度国际站
- 优化部分错误码描述
- 修复一键清未读时，如果本地包含解散的群会话，后台会返回失败的问题
- 加入 AVChatRoom 直播群时，支持返回进群前 20 条消息；需开通旗舰版套餐包
- 拉取群历史消息时，漫游消息的最大拉取次数支持后台配置
- 修复通过 restapi 发送不计未读的消息，SDK 做已读上报偶现清不掉未读数的问题
- 修复离线期间通过 restapi 快速进退群，被操作用户重新登录后，获取加入的群列表偶现错误的问题
- 修复离线期间发送不计入未读的消息，消息接收者重新上线后，偶现未读数不准确的问题

### TUIKit & Demo

- 登录界面支持国家地区的选择
- 清理用户在同意接受隐私协议之前做的初始化操作


## 5.8.1696 @2021.12.10 - 增强版

### SDK

- 修复本地包含解散的群会话或退出的群会话未读数时，一键清空未读消息出现失败的问题

### TUIKit

- 新增消息回复功能的支持
- 更换默认皮肤，优化界面逻辑
- iOS 修复资源文件偶现加载失败的问题


## 5.8.1672 @2021.11.30 - 增强版

### SDK

- 优化设备信息获取逻辑，满足合规要求
- 修复一键清空未读数功能在某些条件下的崩溃问题

## 5.8.1668 @2021.11.19 - 增强版

### SDK

- 新增一键清空所有会话未读消息的能力
- 新增 Community 社群的支持，社群最多支持 10万人；需开通旗舰版套餐包
- 获取会话未读总数自动剔除掉消息接收选项为“接收不提醒”和“不接收消息”的会话
- 长连接加密通道新增国密的支持
- 修复拉取群历史消息时，偶现结束标记判断错误的问题
- 修复从基础版覆盖升级到增强版时，之前加入的直播群会有未读数的问题
- 修复对特殊格式账号设置已读上报出现失败的问题
- 修复私有化环境下频繁断网重连时，偶现连接的服务器不正确的问题
- 多端同步场景下，接收到自己发送的群消息，清空对应群会话的未读数
- 修复离线期间被踢下线后，再次登录偶现没有回调的问题
- 跨平台 C 版本 SDK，接收到新消息时补齐离线推送字段

### TUIKit
- 消息免打扰逻辑优化
- 会话列表未读消息小红点逻辑优化
- 群聊界面支持长按群头像触发群 @ 消息
- 语音消息播放过程中，支持点击停止播放
- 新增一键清空所有会话未读数的能力
- 新增社群的支持

## 5.7.1435 @2021.09.30 - 增强版

### SDK

- 修复群资料自定义字段修改后本地数据未及时更新问题
- 修复置顶会话过多时的同步问题
- 修复 Android 端超时的信令没有带邀请时填写的自定义数据问题
- 修复拉取非好友资料时，由于网络请求失败导致使用空资料覆盖本地资料问题
- 修复退群之后，重新加群，会拉到之前的消息历史记录问题
- 修复删除好友后 onFriendListDeleted 回调二次的问题
- 修复会话最后一条消息好友备注为空的问题
- 修复 IM SDK 初始化后，未登录时，调用 getConversationList 无回调问题
- 修复断网后在群会话发送失败消息，恢复网络后该会话接收首条消息没有未读数问题
- 修复陌生人的第一次会话获取不到未读数问题
- 修复群会话消息免打扰状态在某些条件下未更新问题
- 修复群属性更新后回调内容不全的问题
- SDK、群组、关系链、会话补充添加监听器和移除监听器接口
- iOS 修复创建 AVChatRoom 时 没有设置加群方式导致失败的问题

## 5.1.66 @2021.09.22 - 基础版

### Android 平台

- 去掉 WiFi 信息的获取

## 5.6.1202 @2021.09.10 - 增强版

### SDK

- 修复退群再加入同一个群后，会把退群期间没有接收到的消息也计入会话未读数的问题
- 修复无法删除由于被禁言导致发送失败的群消息问题
- 修复拉取历史消息时偶现把消息发送者的昵称和头像恢复为旧数据的问题
- 会议群可以配置是否支持未读数
- 新加坡、韩国、德国三地国际站支持接入加速
- 修复接收到的图片消息偶现图片格式错误的问题
- 修复 Windows 平台发送视频消息时偶现缩略图发送失败的问题
- 优化普通群消息接收成功率数据上报
- 修复直播群设置群成员禁言后，获取群成员资料拿到的禁言时间为 0 的问题

## 5.6.1200 @2021.08.31 - 增强版

### SDK

#### 通用变更点

- 优化登录耗时
- 支持新加坡、韩国、德国国际站
- 支持商业化 Http DNS
- 优化群属性逻辑，解决多端同时修改群属性时的并发问题
- 优化消息数据库查询速度
- 优化连网策略
- 优化图片、视频、语音消息搜索
- 优化获取会话列表 getConversationList 耗时长的问题
- 优化了服务端的状态变更的第三方回调逻辑：新设备登录把旧设备踢下线时，不再触发服务端的logout回调
- 直播群不做已读上报
- 统一登录错误码
- 好友搜索回调参数由 V2TIMFriendInfo 修改为 V2TIMFriendInfoResult，方便根据 relationType 判断好友关系
- 消息对象增加获取离线推送配置的接口
- 修复更新个人资料偶现的数据库崩溃问题
- 修复 SDK 初始化完成前，查询和操作数据库失败的问题
- 修复卸载重装后单聊已读回执失效问题
- 修复 onFriendListAdded 偶现回调两次问题
- 修复无法删除本地插入的消息问题
- 修复群 tips 消息存入数据库时没有保存群资料自定义字段问题
- iOS 获取用户自定义字段时去掉 Tag_Profile_Custom_ 前缀，获取好友自定义字段时去掉 Tag_SNS_Custom_ 前缀
- Android 去掉运营商名称的获取，去掉 wifi 信息的获取，去掉 androidx 的依赖
- Android 解决非 utf-8 编码导致的崩溃问题

### TUIKit & Demo

- 群成员列表相关界面增加分页拉取逻辑
- Android 优化每次删除或者撤回消息都会全部加载会话列表问题
- Android 优化每次加载会话列表都重复加载群头像问题
- iOS 清空关键词再次输入新关键词搜索消息时，显示的记录条数不准确问题
- iOS 修复搜索到的自定义消息在聊天界面不会展示的问题

## 5.5.897 @2021.07.29 - 增强版

### SDK

- 修复数据上报偶现崩溃问题

### Android 平台

- 去掉获取运营商名称的调用 getSimOperatorName()


## 5.1.65 @2021.07.29 - 基础版

### Android

- 去掉获取运营商名称的调用 getSimOperatorName()

## 5.5.892 @2021.07.14 - 增强版

### SDK

- 消息搜索支持多个关键字按照“与”或者“或”的关系进行搜索
- 消息搜索支持设定消息发送者账号进行搜索
- 拉取历史消息支持设定时间范围
- 拉取群的历史消息支持按照 sequence 进行拉取
- 新增消息被第三方回调修改后的通知
- 群资料新增获取最多允许加入的群成员数量的接口
- 会话对象新增 orderKey 排序字段，方便 App 层对没有最后一条消息的会话进行排序
- 优化直播群消息接收时延，后台预先完成账号转换
- 升级连网调度协议，优化海外连网耗时
- 优化会话列表拉取逻辑
- 优化群成员列表拉取逻辑，开启本地缓存
- 修复“日志级别低于 Debug 时不触发日志回调”的问题
- 修复“获取群成员资料时没有好友备注”的问题
- 修复“获取加入的群列表中包含待群主审批的群”的问题
- 修复线上反馈的稳定性问题

## 5.4.666 @2021.06.03 - 增强版

### SDK

- 原有精简版 SDK 改名为增强版 SDK
- 支持消息搜索、群搜索、好友搜索
- 发送消息时新增参数支持，用于设置是否更新会话的最后一条消息
- 支持清空会话的漫游消息并保留会话
- 相同平台下支持多个终端同时登录
- 优化连网登录耗时
- 优化数据上报
- 优化离线推送逻辑，支持全局关闭消息离线推送。
- 优化离线推送逻辑，VIVO 手机离线推送支持设置消息分类 classification 字段
- 修复C2C 会话未读数偶现不准确的问题
- 优化历史消息拉取速度
- 消息多 Element 支持添加表情和位置消息
- 修复离线期间修改群昵称，重新登录后对应会话的昵称更新不及时的问题
- 修复对 C2C 会话做已读上报偶现 20005 错误码的问题

## 5.3.435 @2021.05.20 - 精简版

### SDK

- 增加删除会话漫游消息的接口
- 修复部分安卓手机长连接连网收不到网络状态变化通知的问题
- 优化好友资料拉取逻辑，针对陌生人请求好友资料时，避免每一次都请求后台
- 修复解散群保留会话的场景下，获取不到群资料和会话历史消息的问题
- 修复获取会话列表接口出现会话顺序错乱的问题
- 获取会话未读总数时过滤掉设置了免打扰的群会话
- 修复 iOS 平台 Http 请求偶现 Crash 的问题

## 5.1.62 @2021.05.20 - 基础版

### SDK

- 修复已知问题


## 5.3.425 @2021.04.19 - 精简版

### SDK

- 支持设置会话置顶
- 支持设置单聊消息免打扰
- 支持发送不计入未读的消息
- 支持在没有网络登录失败的情况下获取本地会话和消息数据
- 新增获取会话未读总数的接口
- 个人资料补齐 birthday 字段
- 修复其他成员撤回群 @ 消息后，被 @ 成员对应会话仍然包含群 @ 提醒的问题
- 修复部分安卓手机长连接初始连网成功后会出现一次断网重连的问题
- 修复 iOS 版本创建群不支持设置自定义字段的问题
- 修复特殊账号用户 findMessage 查询不到本地消息的问题

## 5.1.60 @2021.04.06 - 标准版

**iOS 平台**

- 优化 SDK 因使用 IDFA 相关关键字可能导致上架 appstore 被拒的问题


## 5.2.212 @2021.04.06 - 精简版

**iOS 平台**

- 优化 SDK 因使用 IDFA 相关关键字可能导致上架 appstore 被拒的问题


## 5.2.210 @2021.03.12 - 精简版

### SDK
**通用变更点**
- 支持消息合并转发的能力
- 长连接连网逻辑优化，重点提升海外连网质量
- 细化登录错误码，对登录时网络是否正常进行区分
- cos 上传逻辑优化，提升富媒体消息发送体验
- 增加获取历史消息的高级接口
- 增加批量获取会话的接口
- 增加批量检查好友关系的接口
- 修复发送失败的消息再次发送之后会在本地数据库生成两条消息的问题
- 修复群成员资料变更时回调的禁言时间不正确的问题
- 修复接收图片消息时回调的图片宽度不正确的问题
- 修复 logLevel 设置为 None 之后控制台仍然会打印日志的问题
- 修复添加好友的 add_source 字段不正确的问题
- 修复发送超过 24M 的视频文件时，发送进度回调偶现负数的问题


## 5.1.56 @2021.03.03 - 标准版

### SDK

**通用变更点**

- 优化网络长连接逻辑，重点提升海外连网质量
- 优化数据上报，细化网络超时相关的错误码
- 修复若干稳定性问题

**iOS 平台**

- 修复 IOS SDK提取日志偶现失败的问题

**Android 平台**

- Android SDK 替换新的日志组件，提升稳定性

**Windows 平台**

- 修复Windows SDK 抛新消息回调时，可能会出现客户线程阻塞 SDK 逻辑线程的问题

## 5.1.138 @2021.02.05 - 精简版

### SDK

**通用变更点**
- 优化日志
- 完善长连接连网策略，优化海外连网质量
- 修复同一秒内收发多条 C2C 消息，偶现会话的最后一条消息不准确的问题
- 修复查询会话列表偶现没有回调的问题
- 修复发送 C2C 消息偶现消息序号不准确的问题

**Android 平台**
- 修复 Android 平台下发送大于 24MB 视频时，上传进度偶现负数的问题
- 修复 Android 平台下发送消息偶现 crash 的问题

## 5.1.50 @2021.02.05 - 标准版

### SDK

- V2 消息对象补齐 random 字段
- 会话 lastMsg 支持撤回消息
- 优化 getMessage 获取的最后一条消息状态偶现异常的问题
- 优化收到消息后频繁拉取用户资料导致消息延迟的问题
- 优化删除账号可能导致拉取群成员列表失败的问题
- 优化 insertLocalMessage 之后调用 findMessage 可能查不到消息的问题
- 优化删除会话会回调会话更新的问题
- Android 优化群历史消息昵称更新不及时的问题
- iOS 优化数据库稳定性问题

### TUIKit & Demo
- Android 优化 TUIKit 查看未下载成功的原图会显示黑屏问题
- iOS  优化国际化相关问题
- iOS  优化同一个时间戳发送多张图片导致的覆盖问题
- iOS  优化 iOS 14系统群组详情页点击添加&删除按钮无响应的问题
- iOS  优化 iOS 14系统退出群聊回到消息列表 Tab 栏消失的问题

## 5.1.137 @2021.01.29 - 精简版

### SDK

**通用变更点**
- 修复使用多台 iOS 设备或者使用多台 Android 设备，反复登录同一个账号后，偶现登录接口没有回调的问题

**Android 平台**
- 修复低配 Android 机型获取日志路径偶现 crash 的问题

## 5.1.136 @2021.01.27 - 精简版

### SDK

**通用变更点**
- V2 API 添加回调日志的接口
- 修复群 @ 消息中被 @ 用户 UserID 为空的问题
- 修复偶现收取不到直播群消息的问题
- 修复网络频繁重连偶现登录状态不对的问题
- 修复离线被踢后重新登录偶现失败的问题
- 修复 DNS 域名解析偶现 crash 的问题


## 5.1.132 @2021.01.22 - 精简版

### SDK

**通用变更点**
- 网络模块支持过载保护
- 修复标准版升级精简版，偶现部分会话丢失的问题
- 修复登录信息过期收不到 onUserSigExpired 回调的问题
- 修复群成员被踢出群后，接着重新进群，再次收到 onMemberKicked 回调


## 5.1.131 @2021.01.19 - 精简版

### SDK

**通用变更点**
- 增加单条消息转发的接口
- 优化直播群消息接收逻辑，直播群接收消息时不再查询消息发送者的昵称和头像
- 修复删除会话的最后一条消息时，没有抛会话更新的问题
- 修复登录完成之后，做 C2C 消息同步时，偶现 C2C 会话的未读数被清零的问题
- 修复离线再上线之后，做同步会话列表时，没有更新会话最后一条消息的问题

**Android 平台**
- 修复 Android 平台下设置自定义消息的 description 字段，设置个人资料的 level 和 role 字段不能生效的问题
- 修复 Android 平台下反初始化时偶现 crash 问题

## 5.1.21 @2021.01.15 - 标准版

### SDK

**Android 平台**
- 修复带 extension 扩展字段的自定义消息发送失败的问题

### TUIKit & Demo
- 完善国际化支持，清理英文语言版本下部分字符串仍然显示为中文的问题

## 5.1.129 @2021.01.13 - 精简版

### SDK

**通用变更点**
- 修复获取会话列表时，没有会话更新，也触发会话更新回调的问题
- 修复清空会话所有消息时，没有把对应会话的最后一条消息置空的问题

**iOS 平台**
- 修复 iOS 平台下 getSignallingInfo 方法传入非信令消息返回的不是 nil 的问题

**Android 平台**
- 修复 Android 平台下偶现 JNI 局部引用表超限导致的 crash 问题


## 5.1.20 @2021.01.08 - 标准版 

### SDK

**通用变更点**

- V2 自定义消息补齐 desc 和 ext 字段
- V2 用户资料接口补齐 role 和 level 字段
- V2 接口优化无论登录成功与否，都可以获取本地会话列表数据以及本地历史消息数据
- V2 增加 getHistoryMessageList 接口，支持获取云端或本地消息以及向前向后拉取
- 优化 C2C 消息获取头像问题
- 优化富媒体消息文件上传的安全性问题及续期问题
- 修复发送的富媒体消息的本地路径为空的问题
- 修复向群内插入一条本地消息，退出重新登录后该会话的 lastMessage 显示为上一条消息问题
- 修复 Elem 乱序的问题
- 修复群@消息撤回，消息列表@提示仍存在问题
- 修复离线期间的群@消息，上线后拉取群历史消息会拉到该系统消息问题
- 修复发送一个语音通话的信令邀请，会接受到二条离线推送通知问题
- 修复聊天消息过多时，设置本地“消息自定义数据”失效问题
- 修复未读的群消息被撤回后，未读计数没有减少的问题
- 修复其他稳定性问题

**iOS & Mac**

- 修复自定义消息传 array json 接收端 crash 的问题
- 修复调用 deleteConversation 传错误的会话 id 直接闪退问题
- 修复草稿箱最后一条草稿删除不掉问题

### TUIKit & Demo

- iOS 修复删除好友/退群后未清除会话置顶信息
- iOS 修复控制台设置用户为管理员，界面仍显示为无管理员权限问题
- iOS 优化视频缩略图为空引起的crash问题
- iOS 修复撤回长文本消息后，撤回消息高度异常问题
- iOS 修复群禁言tips的不显示的问题
- iOS 优化国际化会话界面的时间显示
- Android 修复创建直播间进入倒计时过程，点击返回crash问题
- Android 修复群聊通话过程，成员拒接出现通话界面未消失问题
- Android 修复直播间观众小窗口模式被踢下线，小窗口未正常关闭问题
- Android 修复成员加群偶现crash问题


## 5.1.125 @2021.01.08 - 精简版

### SDK

**通用变更点**
- V2 API 消息对象增加 random 字段
- V2 API 自定义消息增加描述信息 description 和扩展信息 extension 字段
- V2 API 用户资料对象新增用户角色 role 和用户等级 level 字段
- 修复从 4.8.1 以下（不包含）版本升级到精简版时，遇到的数据库兼容性问题
- 修复自己主动发送的消息，偶现还能收到这条消息回调的问题
- 修复当自己没有加入任何群组时，获取加入的群列表没有回调的问题
- 修复设置群消息接收选项时，没有会话更新回调的问题
- 修复会话同步逻辑偶现没有结束回调的问题
- 修复会话同步逻辑偶现 crash 的问题


## 5.1.123 @2020.12.31 - 精简版

### SDK

**通用变更点**
- 复 Android 版本收不到 RESTAPI 下发的群自定义系统消息的问题
- 优化消息 random 字段的生成方法
- 优化日志打印方便定位问题
- 修复网络模块偶现 crash 的问题


## 5.1.122 @2020.12.25 - 精简版

### SDK

**通用变更点**
- 修复设置会话草稿可能没有回调的问题
- 修复 findMessage 查找消息时，没有补全消息发送者信息的问题
- 修复插入本地消息后通过 findMessage 查找消息可能失败的问题
- 修复设置群消息接收选项时没有更新会话对象的问题
- 修复个人昵称头像或群昵称头像变更时，没有抛会话变更通知的问题
- 修复插入本地消息时，没有更新对应会话最后一条消息的问题
- 个人资料更新周期开启云端控制

**iOS 平台**
- 修复 IOS 平台下字典和数组操作不当引发的偶现 Crash

**Android 平台**
- 修复安卓平台下删除消息偶现 Crash 的问题


## 5.1.121 @2020.12.18 - 精简版

### SDK

**通用变更点**
- 优化群资料拉取逻辑，直播群不用拉取自己的群成员信息
- 完善日志打印，补齐设备类型字段
- 解决 C2C 会话里收到消息撤回通知时，没有更新对应会话最后一条消息状态的问题
- 修复直播群长轮询消息延时过大的问题
- 修复相同账号重复登录后再加入同一个直播群，消息长轮询模块没有更新消息拉取 key 的问题

**iOS 平台**
- 修复 IOS 平台消息自定义字段传入 json 数组时，接收端信令模块解析出现 Crash 的问题

**Android 平台**
- 修复安卓平台设置会话草稿偶现 Crash 的问题


## 5.1.118 @2020.12.11 - 精简版

### SDK

**通用变更点**
- 优化消息去重逻辑，修复同一条消息可能会回调多次的问题
- 增加向本地插入 C2C 消息的接口
- 修复删除和撤回群的未读消息时，群未读计数不会减小的问题
- 修复发送失败的消息不能删除的问题
- 修复删除群会话时，如果已经退群或者对应的群已经解散，会回调删除失败的问题
- 修复设置群消息已读上报时，如果已经退群或者对应的群已经解散，会回调设置失败的问题

**iOS 平台**
- 修复个人资料设置签名失败的问题

**Android 平台**
- 修复添加好友黑名单偶现崩溃的问题
- 修复发送消息没有同步返回消息 ID 的问题


## 5.1.115 @2020.12.04 - 精简版

### SDK

**通用变更点**
- 优化信令超时时间与服务器时间同步
- 修复弱网下建连偶现失败的问题

**iOS 平台**
- 完善 API 头文件

**Android 平台**
- JSON 替换 Gson 修复崩溃问题


## 5.1.10 @2020.12.04 - 标准版

### SDK

**通用变更点**

- V2 API 增加群自定义字段和消息多 Element 支持
- V2 API 增加向本地插入 C2C 消息的接口
- 优化普通群和直播群丢消息问题
- 修复发送失败的消息无法删除的问题
- 修复 C2C 会话里，发送的第一消息是在线消息的情况下，收不到已读回执的问题
- 修复已经撤回的消息，通过拉历史消息的接口返回后，消息状态不正确的问题
- 修复 iOS 平台获取好友分组的接口传入空分组名时，不能返回所有分组信息的问题
- 修复稳定性问题


## 5.1.111 @2020.12.01 - 精简版

### SDK

**通用变更点**

- 完善日志打印
- 修复若干稳定性问题

## 5.1.2 @2020.11.11 - 标准版

**iOS/Mac平台**

- iOS 支持 iphone 和 ipad 同时在线
- Mac 支持 arm64 架构

**Android平台**
- 修复android版本稳定性问题
- 替换为标准TRTC依赖包

## 5.1.110 @2020.11.26 - 精简版

### SDK

**通用变更点**

- 补齐 V2 API 的所有接口
- 补齐会话功能
- 补齐关系链功能
- 增加群@功能
- iOS 支持 iPhone 和 iPad 同时在线
- 发送消息支持多 Element
- 群资料补齐自定义字段
- 修复若干稳定性问题

## 5.1.1 @2020.11.05 - 标准版 

### SDK

**iOS/Android平台**

- 增加获取 AVChatRoom 直播群在线人数的接口
- 增加根据消息唯一 ID 查询消息的接口
- 增加获取服务器校准时间戳的接口
- 优化登录速度
- 优化群资料拉取逻辑
- 修复退出群组之后拉不到本地消息的问题
- 修复发送成功的消息被第三方回调修改之后，发送端消息没有及时更新的问题
- 修复 Metting 会议群在经过控制台配置后，对应的会话仍然不支持未读数的问题
- 修复 AVChatRoom 直播群偶现收不到消息的问题
- 修复其它一些偶现的稳定性问题

### TUIKit & Demo

**iOS/Android**
- 群成员@ 支持 @所有人
- TUIKit 组件国际化支持
- 安卓版本发送图片消息时支持选择视频
- 优化音视频通话请求超时逻辑
- 安卓离线推送更新为依赖 TPNS 的包
- 群直播增加开播动画
- 群直播增加直播小窗的支持

## 5.0.108 @2020.11.02 - 精简版

### SDK

**通用变更点**

- 修复 iOS 版本稳定性问题
- 修复 Android 版本偶现消息不回调问题

## 5.0.10 @2020.10.15 - 标准版

### SDK

**iOS/Android平台**

- 优化信令接口，支持设置在线消息 onlineUserOnly 和离线推送信息 offlinePushInfo 参数
- 优化获取单个会话接口的异步回调
- 会话增加获取群类型接口，方便会话列表展示过滤

### TUIKit & Demo

**iOS/Android**
- 新增群直播功能，连麦、送礼、美颜、变声等功能一应俱全
- 新增直播大厅，支持连麦、PK、点赞、送礼、美颜、弹幕、好友关注等
- 优化语音视频信令识别问题

## 5.0.106 @2020.09.21 - 精简版

### SDK

**通用变更点**

- 修复已知稳定性问题


## 5.0.6 @2020.09.18 - 标准版

### SDK

**通用变更点**

- 增加群@功能
- iOS 和 Android 新增接口 deleteMessages，会同时删除本地及漫游消息
- 接口 deleteConversation 在删除会话的同时会删除本地及漫游消息
- API2.0 接口补充了用户资料、好友资料、群成员资料的自定义字段的设置和获取接口
- 优化图片上传兼容性问题
- 修复设置群消息接收选项再立即获取该值，该值未改变的问题
- 修复 C2C 本地会话删除后，C2C 的系统通知会更新会话，但是消息 elem 为空的问题
- 修复含中文的 userID 导致图片上传不成功的问题
- 修复带有特殊字符的账号设置用户 nickname 成功后，进群发消息，群内其他成员接收到新消息回调中 nickname 为空的问题
- 修复已知崩溃问题

**iOS 平台**

- 修复移除消息监听 crash 的问题
- 优化会话对象账号删除导致会话获取异常的问题
- 优化初始化卡顿问题

**Android 平台**

- 优化信令发送超时失败时的处理
- 修复信令取消接口的自定义数据无效的问题
- 修复群属性删除接口 keys 传 null 无法删除所有属性的问题
- 修复信令群呼叫接受或者拒绝后还能继续接受或拒绝的问题
- 修复 API2.0 接口多 Element 解析问题

**Windows 平台**

- 修复已知内存泄漏问题
- 优化日志上传问题
- 修复 PC 上某些机型相同账号同时登录不会互踢的问题
- 修复 PC 收到消息乱序的问题

### TUIKit & Demo

**iOS**

- 增加群@的功能
- 增加新表情包
- 更新 SDWebImage 依赖库
- 优化有人申请加群 UI 展示的问题
- 优化音视频通话文本展示

**Android**

- 增加群@的功能
- 修复建群选择联系人时可能展示的与实际选择不一致的问题
- 修复自定义消息可能显示混乱的问题
- 修复 AVCallManager、TRTCAVCallImpl 偶现 Crash 的问题
- 增加新表情包


## 5.0.102 @2020.09.04 - 精简版

### SDK

**通用变更点**

- 发布 Android & iOS 精简版 SDK
- 精简版 SDK 在原有标准版的基础上裁剪了好友和会话两项能力，并对部分业务逻辑做了优化，以实现更高的执行效率，更小的安装包增量。

## 4.9.1 @2020.07.24 - 标准版

### SDK

**通用变更点**

- 优化海外登录问题
- 修复部分海外地区文件上传失败问题
- 修复含@符号的账号上传文件失败问题
- 修复 C2C 未读数偶现错误问题
- 修复会话 showName 偶现展示异常的问题
- 文件类型消息增加获取下载 url 的接口

**iOS 平台**

- 修复断网时获取 C2C 消息无回调问题

**Android 平台**

- 修复信令解析接口偶现崩溃问题
- 修复消息中获取离线推送信息偶现崩溃问题
- 修复 API2.0 getFriendApplicationList 接口无数据不回调问题以及 getGroupMembersInfo 接口传入非群成员不回调问题

**Windows 平台**

- 获取加入群组时增加群组的详细信息
- 修复小文件发不出去问题
- 修复日志上报的 6002 错误

### TUIKit & Demo

**iOS**

- 增加音视频离线通话的推送，并可以跳转到接听界面
- 优化自定义消息删除、撤回无效的问题
- 优化界面
- 音视频代码 swift -> oc，大幅减少第三方依赖库
- 支持 LiteAV_TRTC ，LiteAV_Professional 两种音视频依赖库 TUIKit pod 集成。

**Android**

- 优化 Demo 的离线推送，升级各厂商的推送 SDK 版本
- 增加音视频离线通话的推送，并可以跳转到接听界面


##  4.8.50 @2020.06.22 - 标准版

### SDK

**通用变更点**

- 修复 API 2.0 接口有人进入直播群（AVChatRoom）后没有回调 onMemberEnter 问题
- API 2.0 接口的 onGroupInfoChanged 和 onMemberInfoChanged 回调增加 groupID 参数
- 修复 C2C 消息发送成功后没有回调会话更新的问题
- 修复切换账号加入同一个直播群（AVChatRoom）后收不到消息的问题
- 修复偶现登录后同步未读消息回调顺序不对的问题
- 增加信令接口
- 直播群（AVChatRoom）增加群自定义属性接口
- 修复已知崩溃问题

**Android 平台**

- 为兼容 android Q 版本，修改日志默认存储位置为 /sdcard/Android/data/包名/files/log/tencent/imsdk

**Windows 平台**

- 修复建群时群成员角色问题

### TUIKit & Demo

**iOS**

- tuikit 替换 api 2.0接口
- 结合 TRTC 实现了音视频通话功能
- 增加了深色模式

**Android**
- tuikit 替换 api 2.0接口
- 结合 TRTC 实现了音视频通话功能
- 支持 AndroidX


## 4.8.10 @2020.05.15 - 标准版

### SDK

**通用变更点**

- iOS 和 Android 支持 ipv6
- 直播群（AVChatRoom） 支持群成员列表动态更新
- 修复 xlog 日志崩溃问题

**iOS & Mac 平台**

- 修复 iOS 发送大文件必现失败问题
- 修复 V2TIMMessage 消息中拉取发送者好友备注 getFriendRemark 异常的问题

**Android 平台**

- IM SDK 支持AndroidX
- 修复 Android 设备由于网络权限问题导致的崩溃

## 4.8.1 @2020.04.30

### SDK

**通用变更点**

- iOS & Android 发布全新的 API2.0 接口
- 修复某些场景下登录不同账户的会话错乱问题

## 4.7.10 @2020.04.23

### SDK

**通用变更点**

- 修复某些网络环境下登录超时的问题
- 修复某些场景下未读数不准确的问题

## 4.7.2 @2020.04.03

### SDK

**通用变更点**

- 修正一处数据错误

## 4.7.1 @2020.03.23

### SDK

**通用变更点**

- 优化了本地日志大小
- 优化了登录耗时
- 修复了未读计数多端同步问题
- 增加获取单个好友接口 getFriendList
- iOS & Android SDK 可以分别设置两个平台的离线推送通知栏消息要显示的标题和内容


## 4.6.102 @2020.02.28

### SDK

**通用变更点**

- 修复某些场景下拉取消息慢的问题
- 修复 3.x 版本音频消息向新版本发送的兼容性问题
- 修复获取会话列表有的 conversation 的 identifier 可能为空的问题
- 修复已知崩溃问题
- 修复 socks5 代理用户密码验证问题
- 优化群未决的处理逻辑
- 提高文件上传上限为100M
- 优化 cos 上传
- 修复没有好友时，获取好友列表返回异常问题

## 4.6.56 @2020.01.08

### SDK

**通用变更点**

- 优化频繁拉取用户资料的内存增长问题
- 优化用户资料特殊字符兼容性问题
- 修复已知崩溃问题
- 修复频繁切换不同账号登录偶现失败问题
- 修复压力测试下的重连问题



## 4.6.51 @2019.12.23

### SDK

**通用变更点**

- 优化网络的连接质量，更快感知网络质量变化
- 优化 AVChatRoom 消息的处理

**iOS & Mac 平台**

- IMSDK 监听都修改为弱引用，不再强持有外部对象
- 消息新增 getSenderNickname 同步返回昵称的接口

**Android 平台**

- 修复离线被踢问题
- 修复上传进度回调在较低版本手机的异常问题
- 修复登录时的内存泄漏
- 消息新增 getSenderNickname 同步返回昵称的接口

**Windows 平台**

- 修复添加好友后发送消息失败问题
- 完善群信息、群成员信息的自定义字段的修改和查询
- 完善所有接口的回调，确保回调一定被调用；确保只有当回调成功时，才将对象转成 json 字符串，回调失败时，返回空字符串。

### TUIKit & Demo

**Android**

- 会话列表头像支持圆角设置
- 修复置顶会话切换账号时异常的问题



## 4.6.1 @2019.11.13

### SDK

**通用变更点**

- 撤回消息支持漫游
- 修复restAPI静默邀请进群引发未读数错误
- 修复弱网下偶现发消息异常
- 修复获取群成员时，角色过滤条件错误逻辑
- 修复通过 RestApi 创建的群组，第一次进群发消息，获取群 name 失败的问题
- 修复关闭缓存后 getUsersProfile 获取用户信息失败的问题
- 修复语音消息文件在没有后缀的情况下，接收后无法下载问题

**iOS & Mac 平台**

- 增加 OPPOChannelID 的设置，解决 Android 8.0 系统以上的 OPPO 手机接收 iOS 消息推送失败的问题
- 优化 getGrouplist 返回对象的注释

**Android 平台**

- 8.0 系统以上的 OPPO 手机离线推送的 channleID 支持在控制台设置
- 废弃 TIMCustomElem 的 ext、sound、desc 字段

**Windows 平台**

- 修复群系统消息的类型字段异常
- 修复返回的群组信息中群组类型与头文件不一致问题
- 修复创建群组时指定群组自定义字段失败问题
- 消息新增发送者资料以及离线推送配置

### TUIKit & Demo

**iOS**

- 增加视频通话功能
- 增加群组头像九宫格合成展示
- 优化会话列表、通讯录以及聊天界面UI

**Android**

- 增加方法来设置对方已读回执是否展示
- 增加群组头像九宫格合成展示
- 优化会话列表、通讯录以及聊天界面UI
- 解决部分手机输入法、界面、文件选择等兼容性问题
- 解决自定义消息会显示错乱的问题
- 解决压力测试下通讯录加载缓慢的问题
- 解决与其他库资源冲突的问题
- 解决cache目录设置不生效的问题

## 4.5.111 @2019.10.16

### SDK

**通用变更点**

- 修复获取群指定类型的成员列表接口的分页问题
- 发送文件类型消息时生成的 URL 增加格式后缀
- 增加群自定义字段修改后的通知回调
- 支持未登录调用 initStorage 方法后获取本地用户和群组信息
- 修复内存泄露问题
- 修复发送消息后撤回，消息状态码不正确问题
- 修复 getMessage 回调错误码不对问题
- 修复强杀 App 重启后单聊未读数错误问题

**iOS & Mac 平台**

- 修复 Mac 休眠偶现一直登录失败问题

**Android 平台**

- 修复某些场景下的稳定性问题
- 修复离线推送在 Android 8.0 系统以上的 OPPO 手机无法接收离线推送问题
- 优化 getElementCount 接口的返回类型

**Windows 平台**

- 跨平台库优化各个平台的网络重连速度
- 修复 Windows 公开群设置管理失败问题
- 跨平台库新增 JVM 配置，方便 Android 环境传入 jvm

### TUIKit & Demo

**iOS**

- 支持与 Web 端互发语音消息
- 修复 swift 加载 TUIKit 资源文件找不到的问题
- 修复好友备注修改后，聊天界面看不到备注名的问题
- 修复会话置顶后会话列表不能及时刷新的问题

**Android**

- 支持与 Web 端互发语音消息
- 支持设置输入框样式
- 支持语音消息未读红点
- 修复 x86 设备视频消息不能播放的问题
- 修复 FileProvider 与集成端冲突的问题
- 修复部分机型上语音权限识别不到的问题
- 修复特定条件下头像不能正常加载的问题
- 修复偶尔气泡显示不全的问题



## 4.5.55 @2019.10.10

### SDK

**通用变更点**

- 修复多次切换不同网络时的崩溃问题
- 优化网络连接质量
- 优化部分 API 接口的注释

**Android 平台**

- 优化 Android 9.0 及以上版本对 http 请求的限制

**iOS & Mac 平台**

- 优化 pod 集成


## 4.5.45 @2019.09.18

### SDK

**通用变更点**

- 优化网络连接的质量
- 修复删除群会话后，再收到新消息，修复未读数异常的问题
- 修复删除会话后，还能在会话更新回调里面获取到已删除会话的问题 
- 优化群/群成员自定义段拉取逻辑

**Android 平台**

- 废弃 TIMManager中的 setOfflinePushListener 接口 以及 TIMOfflinePushNotification 类

### TUIKit & Demo

**iOS**

- 修复 NSSting + Common.h  类冲突的问题
- 修复群 tips 消息展示不全的问题

**Android**

- 增加已读回执
- 兼容老版本正在输入显示
- 修复重发消息不能立即显示在聊天窗口最下方的问题
- 修复群聊时特定条件下不能显示头像的问题
- 修复不能显示多 elements 群消息的问题
- 修复特定消息导致的崩溃
- 修复群管理员权限错误的问题
- 修复web端发送文件不能正常接收的问题



## 4.5.15 @2019.08.30

### SDK

**通用变更点**

- 优化海外用户发送文件消息的速度
- 修复消息撤回后通过 getLastMessage 获取该消息状态不对的问题；修复撤回监听多次回调的问题
- 后台修复群成员被禁言后，退群再进群获取禁言时间异常问题
- 修复 msg 时间主动修改后，savemsg 的时候时间不生效的问题
- 修复偶现登录无回调的问题
- 修复被撤回群消息的rand和timestamp为空的问题
- 修复登出状态下回调userSig过期的问题；修复登出状态下仍然断网重连的问题

**Android 平台**

- 后台支持Android端的FCM推送
- 修复获取指定的好友分组，传入 null 时报错问题
- 修复特定场景下 checkEquals 接口崩溃问题

**Windows平台**

- MessageLocator新增unique_id 字段
- Windows版本支持64位
- 跨平台库新增用户资料接口、关系链接口

### TUIKit & Demo

**iOS**

- 新增自定义消息发送
- 新增C2C已读回执
- 新增语音未播放红点显示

**Android**

- 修改部分场景下demo内存泄漏的问题
- 修改某些场景下的崩溃问题
- 修改定制消息颜色不对的问题
- 修改气泡显示不全或不对的问题
- 修改会话列表不能展示头像的问题
- 修改ConversationLayout不能修改标题栏颜色的问题
- 支持64位ijkplayer
- 支持多元素消息
## 4.4.900 @2019.08.07

### SDK
**通用变更点**

- 修复某些场景下的稳定性问题
- 优化未读消息计数
- 优化登录后加载最近会话列表速度
- 增加日志清理的功能
- 修复同步大量未读 C2C 消息引起丢消息的问题
- AVChatroom 退群后不再 push 退群系统消息到本设备上
- 修复群系统消息偶现收不到的问题
- onRefresh/onRefreshConversations 回调增加限频逻辑
- 优化 saveMessge 排序异常问题

**iOS & Mac平台**

  - 修改 getGroupInfo 回调参数为 TIMGroupInfoResult，增加获取每个群组对应的错误码
  - 优化 4.x 版本推送展示样式，保持和 2.x，3.x 版本一致
  - 优化登录账号含有中文字符发送图片/文件/视频失败的问题

**Android 平台**

  - 修复4.2.2系统版本的手机加载 so 失败问题
  - 修复 getGroupInfo 接口返回的数据数量不正确问题
  - 修改 getGroupInfo 回调参数为 TIMGroupDetailInfoResult，增加获取每个群组对应的错误码
  - 统一使用com.tencent.imsdk.TIMGroupReceiveMessageOpt类

**Windows平台**

  - 修复Windows配置文件路径为乱码的问题


###  TUIKit & Demo

**iOS**

  - 更改了 iOS Demo 的 UI，包括默认头像、以及输入界面的四个功能图标（拍摄、录像、图片、文件）
  - “我”新加资料卡，将个人信息放入了资料卡中
  - 加入了点击头像查看大图的功能
  - Demo中的群聊小灰条样式改变，用户昵称会变为蓝色，点击昵称可以跳转到用户的信息界面
  - 优化了Demo中群组内昵称的显示逻辑
  - 优化了聊天界面中头像显示的逻辑
  - 在各个界面中添加了触摸反馈，在用户使用TUIKit时可对反馈进行自主设置和定制

**Android**

  - 新增聊天消息语音，MotionEvent.ACTION_CANCEL 事件处理
  - 新增会话列表，聊天界面，详情资料，通讯录，增加头像显示功能
  - 新增个人资料修改头像
  - 新增离线推送功能 Intent 跳转
  - 新增单聊，群聊会话，随机头像
  - 新增群成员被设置成管理员和取消管理员消息提示
  - 新增群成员被禁言和取消禁言消息提示
  - 修复撤回消息后，tips 不显示"您撤回了一条消息"文案
  - 修复撤回消息后，会话列表最后一条消息一直显示撤回消息内容的问题
  - 修复魅族上收到离线消息，进入聊天界面，白屏问题
  - 修复处于置顶会话的聊天会话，收到新消息时，会话不更新最后一条消息问题
  - 修复用户名或密码为空时，Toast 提示
  - 修复群主转让的 GroupTips 消息在 TUIKit 显示异常问题
  - 修复部分手机上报错 Didn't find class "android.support.v4.content.FileProvider"
  - 优化置顶聊天逻辑，按照最近时间排序展示
  - 修复聊天中软键盘和更多布局同时出现问题
  - 修复新注册用户，没有一个好友时，通讯录界面不显示3个 Item（群聊，黑名单，新的联系人）问题
  - 修复播放视频时点击手机返回按钮，视频声音依然在播放问题
  - 修复录制语音消息时，正在播放的语音消息不会停止，会被录制进去问题
  - 修复部分手机播放 iOS 发过来视频播放异常问题



## 4.4.716 @2019.07.16


**iOS & Mac平台**

- API 整理合并
- 文件、视频、语音消息增加获取下载url的接口
- 新增 disableStorage 接口，禁用所有本地存储
- 修复发送在线消息后，发送端 conversation 获取 lastMsg 还能获取到的问题
- getSenderProfile 接口去掉返回值，统一通过回调返回
- 群组的函数 modifyReciveMessageOpt 修改为 modifyReceiveMessageOpt
- 修复 2.X/3.X 版本给 iOS 4.X 版本发视频消息，视频截图拿不到的问题
- 修复退出时数据上报偶现崩溃问题
- 优化登录模块（重复登录/频繁登录/频繁切换账号/自动上线/离线被踢）
- 修复退群/群解散后无法清除未读数问题
- 修复偶现收不到群解散通知问题
- 优化长时间切到后台后再切回前台，发消息耗时长的问题
- 优化单聊未读计数问题
- autoLogin 传参 TIMLoginParam 修改为 userID
- initStorage 传参  TIMLoginParam 修改为 userID
- 去掉多账号同时登陆接口（newManager，getManager，deleteManager）
- 修复 respondsToLocator 偶现崩溃的问题 
- 修复 TIMGroupInfo -> lastMsg 调用相关函数偶现 crash 的问题
- TUIKit
  - 优化最近联系人列表更新算法，减少刷新频率
  - 解决黑名单内存泄漏
  - 新增消息气泡和头像点击事件回调
  - 解决最近联系人与聊天窗口没有显示最新头像问题
  - 优化文档注释

**Android平台**

- 整理与合并 API 接口
  - TIMManager 增加 TIMManagerExt 中的所有接口
  - TIMConversation 增加 TIMConversationExt 中的所有接口
  - TIMGroupManager 增加 TIMGroupManagerExt 中的所有接口
  - TIMMessage 增加 TIMMessageExt 中的所有接口
  - TIMUserConfig 增加 TIMUserConfigMsgExt 中的所有接口
  - 当前保留 TIMManagerExt、TIMMessageExt、TIMConversationExt、TIMGroupManagerExt、TIMUserConfigMsgExt 类原有接口以做兼容，后续这些类将废弃
- 加好友增加单向和双向的选项 
- 新增 disableStorage 接口，禁用所有本地存储
- 文件、视频、语音消息增加获取下载 url 的接口
- 修复部分 android 手机，queryUserProfile 为 null 的问题
- 修复发送在线消息后，发送端 conversation 获取 lastMsg 还能获取到的问题
- getSenderProfile 接口去掉返回值，统一通过回调返回
- 修复退出时数据上报偶现崩溃问题
- 优化登录模块（重复登录/频繁登录/频繁切换账号/自动上线/离线被踢）
- 修复退群/群解散后无法清除未读数问题
- 修复偶现收不到群解散通知问题
- 优化长时间切到后台后再切回前台，发消息耗时长的问题
- 优化单聊未读计数问题
- TUIKit
  - 支持聊天短视频消息，播放时横竖屏旋转
  - 支持 Javadoc 文档
  - 修复发送视频时，正在发送中，下载视频会导致下载失败问题
  - 修复 GroupChatManagerKit.getInstance().sendMessage 方法的 onSuccess 回调会触发两次的问题
  - 优化聊天界面说话太短问题，现在修改为至少为1秒钟，1s以下提示说话太短
  - 修复私有群-邀请成员入群时可以重复邀请同一个成员的问题
  - 处理备注不能设置为空的问题
  - 修复本机系统时间错误后，聊天界面的时间展示异常问题
  - 修复本地发送的语音消息，换一台手机后通过漫游的方式无法下载成功问题
  - 修复群主设置群名称为空时提示修改成功，实际上是修改失败的问题

**Windows平台**

- 修复发送图片、文件、音频、视频等消息包含中文路径，不同终端发送中文问题
- 修复 TIMMsgReportReaded 已读上报无效问题
- 修复收到的消息和消息撤回的 rand 和 seq 不一致问题
- 修复退出时数据上报偶现崩溃问题
- 优化登录模块（重复登录/频繁登录/频繁切换账号/自动上线/离线被踢）
- 修复退群/群解散后无法清除未读数问题
- 修复偶现收不到群解散通知问题
- 优化长时间切到后台后再切回前台，发消息耗时长的问题



## 补丁包 4.4.631 @2019.07.03

**Android平台**

- 修复离线推送问题及崩溃问题



## 4.4.627 @2019.06.27

**iOS & Mac平台**

- 修复无网络时发消息超时长的问题
- 修复消息发送后ID值变化的问题
- 修复消息乱序的问题
- 修复拉取聊天室历史消息丢失的问题
- 修复系统消息类型错误的问题
- 修复获取图片消息的原图片 size 大小为0的问题
- 修复手机修改系统时间后发消息失败问题
- 修复某些情况下上报会话已读失败，获取未读数目异常的问题 
- 修复发送在线消息后，可通过会话 getLastMessage 获取到的问题
- 修复撤回最后一条消息，通过会话获取 lastMsg 状态异常的问题
- 修复消息撤回后，对方的会话列表依然存在消息内容的问题
- 修复断网重连的情况下，图片/语音/文件消息发送状态异常的问题
- 修复登录账号含有特殊字符，无法发送语音图片的问题
- 修复V2版本向V4版本发图片，V4版本拿不到微缩图宽高的问题
- 修复创建一个会话 saveMessage 后，最近会话拉取不到的问题
- 修复 getMessage 获取不到群Tips消息的 MemberChangeList 内容的问题
- 修复getLoginStatus获取登录状态异常的问题
- 修复拒绝加群请求，对方却进了群的问题
- 修复设置日志路径后，盘符的根目录下也有会一个log文件问题
- 修复互踢收不到回调的问题 -Mac
- TUIKit
  - 优化群组管理页面逻辑
  - 解决iOS 13兼容性问题
  - 已知问题修复

**Android平台**

- 修复无网络时发消息超时长的问题
- 修复消息发送后ID值变化的问题
- 修复消息乱序的问题
- 修复拉取聊天室历史消息丢失的问题
- 修复系统消息类型错误的问题
- 修复下载文件的进度值异常问题
- 修复手机修改系统时间后发消息失败问题
- 修复断网重连的情况下，图片/语音/文件消息发送状态异常的问题
- 修复群组被解散或则用户被禁言后发消息排序异常的问题
- 修复某些情况下上报会话已读失败，获取未读数目异常的问题 
- 修复消息撤回后，对方的会话列表依然存在消息内容的问题
- 修复撤回最后一条消息，通过会话 getLastMessage 状态异常的问题
- 修复发送在线消息后，通过会话 getLastMessage 获取到的问题
- 修复获取图片消息的原图片 size 大小为0的问题
- 修复V2版本向V4版本发图片，V4版本拿不到微缩图宽高的问题
- 修复被挤下线后 getLoginUser() 仍可获取登录的用户问题
- 修复 getSenderProfile 获取个人信息为空的问题
- 修复群系统消息 TIMGroupSystemElem 中的 getOpUser 为空的问题
- 修复 getMessage 获取不到群Tips消息的 MemberChangeList 内容的问题
- 修复创建一个会话 saveMessage 后，最近会话拉取不到的问题
- 修复设置日志路径后，盘符的根目录下也有会一个log文件问题

- TUIKit
  - 已知问题修复

**Windows平台**

- 修复无网络时发消息超时长的问题
- 修复消息发送后ID值变化的问题
- 修复消息乱序的问题
- 修复拉取聊天室历史消息丢失的问题
- 修复系统消息类型错误的问题
- 修复跨平台库iOS的ImSDK模块中不包含Armv7a架构的问题
- 修复跨平台库TIMMsgReportReaded接口不支持Message为空的问题
- 修复跨平台库同一设备下运行IM多个实例登录同一个账号不互踢问题
- 跨平台库消息增加获取消息唯一ID的json key
- 修复设置日志路径后，盘符的根目录下也有会一个log文件问题
- 修复 getMessage 获取不到群Tips消息的 MemberChangeList 内容的问题
- 修复撤回最后一条消息，通过会话获取 lastMsg 状态异常的问题
- 修复某些情况下上报会话已读失败，获取未读数目异常的问题



## 4.4.479 @2019.06.12

**iOS平台**

- 修复拉取离线消息出现丢消息的问题
- 修复更换不同 SDKAppId 引起登录失败的问题
- 修复语音消息播放失败的问题
- 修复群消息撤回的崩溃
- 修复获取好友列表和创建群组的6002错误
- 优化发送消息的效率
- 缓存优化，降低UI卡顿
- TUIKit
  - 全新的UI设计
  - 全新的架构设计
  - 完善通讯录、群组管理、关系链等功能
  - 一大波bugfix

**Android平台**

- 修复拉取离线消息出现丢消息的问题
- 修复更换不同 SDKAppId 引起登录失败的问题
- 修复语音消息播放失败的问题
- 修复群消息撤回的崩溃
- 修复获取好友列表和创建群组的6002错误
- 修复Android 创建群人数过多导致崩溃问题
- 优化发送消息的效率
- 缓存优化，降低UI卡顿
- TUIKit
  - 全新的UI设计
  - 全新的架构设计
  - 完善通讯录、群组管理、关系链等功能
  - 一大波bugfix

**Windows平台**

- 修复拉取离线消息出现丢消息的问题
- 修复更换不同 SDKAppId 引起登录失败的问题
- 修复语音消息播放失败的问题
- 修复群消息撤回的崩溃
- 修复获取好友列表和创建群组的6002错误
- 缓存优化，降低UI卡顿
- 优化发送消息的效率


## 4.3.145 @2019.05.31

**iOS平台**

- 修复切换账号后再次收到同样的消息问题
- 修复票据过期后获取c2c漫游消息崩溃问题
- 修复 ChatRoom 群新用户加入后获取不到历史消息问题
- 修复 FindMsg 崩溃问题
- 优化群消息同步问题
- 修复 getReciveMessageOpt 偶现异常


**Android平台**

- 修复切换账号后再次收到同样的消息问题
- 修复票据过期后获取c2c漫游消息崩溃问题
- 修复 ChatRoom 群新用户加入后获取不到历史消息问题
- 避免重复添加相同的消息监听器
- 修复 FindMsg 崩溃问题
- 优化群消息同步问题

**Windows平台**

- 修复切换账号后再次收到同样的消息问题
- 修复票据过期后获取c2c漫游消息崩溃问题
- 修复 ChatRoom 群新用户加入后获取不到历史消息问题
- 优化群消息同步问题




## 4.3.135 @2019.05.24

**iOS平台**

- 增加校验好友接口 checkFriends
- 增加 queryGroupInfo 接口获取本地数据
- 废弃 getGroupPublicInfo 接口，统一用 getGroupInfo 接口
- 修复消息列表包含已删除消息的问题
- 修复未登陆获取不了本地消息问题
- 修复最近联系人拉取数量及排序问题
- 修复群消息断网重连后的消息同步问题
- 修复短时间内接收大量消息时判重失效问题
- 修复重启程序后有概率再次收到同一条消息的问题
- 修复初始化和同步消息偶现异常问题
- 修复会话的 lastMsg 被删除引发的偶现异常问题
- 修复登录后 onRefreshConversation 回调两次且数据相同问题
- 修复 chatroom 获取不了入群前的历史消息问题
- 修复 TIMMessage 的 copyFrom 接口不生效的问题
- 修复 TIMGroupEventListener 监听收不到回调的问题
- 修复线上反馈的 Crash 问题
- 优化重连时连接请求
- 优化在不同网络下首次连接和海外接入点的质量
- 优化iOS切换WIFI时网络重连慢的问题


**Android平台**

- 增加校验好友接口 checkFriends
- 增加 queryGroupInfo 接口获取本地数据
- 废弃 getGroupDetailInfo 和 getGroupPublicInfo 接口，统一用 getGroupInfo 接口
- 修复消息列表包含已删除消息的问题
- 优化 modifyGroupOwner 和 getGroupMembersByFilter 回调问题
- 修复未登陆获取不了本地消息问题
- 修复最近联系人拉取数量及排序问题
- 修复群消息断网重连后的消息同步问题
- 修复短时间内接收大量消息时判重失效问题
- 修复重启程序后有概率再次收到同一条消息的问题
- 修复初始化和同步消息偶现异常问题
- 修复会话的 lastMsg 被删除引发的偶现异常问题
- 修复登录后 onRefreshConversation 回调两次且数据相同问题
- 修复 chatroom 获取不了入群前的历史消息问题
- 修复线上反馈的 Crash 问题
- 优化重连时连接请求
- 优化在不同网络下首次连接和海外接入点的质量



**Windows平台**

- 新增自定义字段数据上报
- 新增在线消息
- 新增消息撤回使用用例
- 修复设置上传文件偶现失败问题
- 修复消息列表包含已删除消息的问题
- 修复最近联系人拉取数量及排序问题
- 修复群消息断网重连后的消息同步问题
- 修复短时间内接收大量消息时判重失效问题
- 修复重启程序后有概率再次收到同一条消息的问题
- 修复会话的 lastMsg 被删除引发的偶现异常问题
- 修复初始化和同步消息偶现异常问题
- 发送消息，在发送成功的回调里面返回消息的json字符串
- TIMSetRecvNewMsgCallback 接口改为 TIMAddRecvNewMsgCallback 和 TIMRemoveRecvNewMsgCallback 接口
- 新增socks5代理服务器配置
- 优化重连时连接请求
- 优化在不同网络下首次连接和海外接入点的质量



## 4.3.118 @2019.05.10

**iOS平台**

- 增加 TIMFriendshipManager 类中的 querySelfProfile 和 queryUserProfile 接口（读取本地数据）
- 修复获取登录 getLoginUser 返回登录用户异常的问题
- 修复线上反馈的用户资料获取失败问题
- 修复重启 APP 后部分本地字段失效问题
- 修复消息删除后调用已读上报偶现异常的问题
- 修复线上反馈的 IM 群组问题
- 修复会话未读数问题
- 修复在线消息问题
- 修复消息重发偶现失效问题
- 修复本地票据过期导致持续重连问题
- 修复线上反馈的 Crash 问题
- 优化服务器连接策略
- 优化断网重连策略
- 优化服务器过载策略
- 优化心跳，减少不必要发包
- TUIKit 
  - 新增支持 CocoaPods 导入
  - 新增联系人界面
  - 新增好友添加界面
  - 新增黑名单界面
  - 新增好友搜索界面
  - 新增新朋友界面
  - 优化好友资料页：增加备注、黑名单、删除好友功能
  - 优化个人资料页：增加昵称、个人签名、生日、性别、所在地修改功能
  - 优化群列表置顶功能

**Android平台**

- 增加 TIMFriendshipManager 类中的 querySelfProfile 和 queryUserProfile 接口（读取本地数据）
- 增加获取好友信息中 addTime 字段
- 增加 x86 及 x86_64 架构支持
- 修复获取登录 getLoginUser 返回登录用户异常的问题
- 修复线上反馈的用户资料获取失败问题
- 修复重启 APP 后部分本地字段失效问题
- 修复消息删除后调用已读上报偶现异常的问题
- 修复线上反馈的 IM 群组问题
- 修复会话未读数问题
- 修复在线消息问题
- 修复消息重发偶现失效问题
- 修复本地票据过期导致持续重连问题
- 修复线上反馈的 Crash 问题
- 优化服务器连接策略
- 优化断网重连策略
- 优化服务器过载策略
- 优化心跳，减少不必要发包
- TUIKit 
  - 加入聊天置顶功能
  - 修改昵称和个性签名，资料页面显示昵称
  - 修复 Android 端接收到 iOS 端发送的表情包后无法显示出来问题
  - 修复未读消息红点数问题
  - 修复美图 M8 设备点击加号后显示操作界面有 UI 问题
  - 修复设置头像后，头像会被缩小，不能铺满 UI 问题
  - 修复登录，自动登录逻辑
  - 修复超过输入内容最大限制后导致的 ANR 问题 
  - 修复发送图片, 当在相册选择图片并预览模式的时候，点击【确定】，发送会没有反应问题
  - 修复聊天界面长按图片消息没有弹出删除和撤销的操作按钮
  - 优化和修复线上反馈的 crash 问题

**Windows平台**

- 修复获取登录 getLoginUser 返回登录用户异常的问题
- 修复线上反馈的用户资料获取失败问题
- 修复重启 APP 后部分本地字段失效问题
- 修复消息删除后调用已读上报偶现异常的问题
- 修复线上反馈的 IM 群组问题
- 修复会话未读数问题
- 修复在线消息问题
- 修复消息重发偶现失效问题
- 修复本地票据过期导致持续重连问题
- 修复线上反馈的 Crash 问题
- 优化服务器连接策略
- 优化断网重连策略
- 优化服务器过载策略
- 优化心跳，减少不必要发包



## 4.3.81 @2019.04.24

**新功能**
- Android平台 补齐老版本 SDK 的好友黑名单功能，好友分组功能，以及加好友请求处理等关系链功能。

**iOS平台**
- 修复草稿箱添加消息元素crash的问题
- 修复某些账户在app卸载重装后拉取不到会话列表的问题
- 修复在登录的状态下usersig过期，不重启app的情况下会一直登录失败的问题
- 修复在登录的状态下usersig过期，发消息失败，收不到 usersig 过期回调的问题
- 修复修复群成员获取数量问题
- 优化请求超时（错误码6012）问题

**Android平台**
- 修复一处app主进程被杀后的报错问题
- 修复群成员获取数量问题
- 修复群自定义字段和群成员自定义字段的设置和获取问题
- 修复获取群信息超时后，没有onError回调出去的问题
- 修复某些账户在app卸载重装后拉取不到会话列表的问题
- 修复在登录的状态下usersig过期，不重启app的情况下会一直登录失败的问题
- 修复在登录的状态下usersig过期，发消息失败，收不到 usersig 过期回调的问题
- 修复消息乱序问题
- 优化请求超时（错误码6012）问题
- 更新关系链错误码
- TUIKit修复日期工具类出错的严重bug(github issue#75)
- TUIKit修改一处崩溃(github issue#86)
- TUIKit修复无权限时，使用SDK的一些问题
- TUIKit修复删除会话，删除消息，然后长按后的一些崩溃问题
- TUIKit修复popupwindow长驻不消失问题
- TUIKit修复消息重复问题
- TUIKit拦截发送空格空消息问题
- TUIKit修复删除会话后，未读消息未更新问题
- TUIKit修复发送消息最大字符限制问题
- TUIKit体验优化和修复若干数组越界问题

**Windows平台**
- 修复部分崩溃问题
- 优化请求超时（错误码6012）问题
- 修复某些账户在app卸载重装后拉取不到会话列表的问题
- 修复在登录的状态下usersig过期，不重启app的情况下会一直登录失败的问题
- 修复在登录的状态下usersig过期，发消息失败，收不到 usersig 过期回调的问题



## 4.2.52 @2019.04.17

**新功能**

- 补齐老版本 SDK 的好友黑名单功能，好友分组功能，以及加好友请求处理等关系链功能。

**iOS平台**
- 优化 API 接口注释
- 修复群自定义字段和群成员自定义字段不生效的问题
- 优化 TIMMessage 获取 senderProfile 拿不到用户资料信息的问题
- 修复已读回执回调及状态问题
- 修复同步未读消息最新一条消息不回调问题
- 修复群消息偶尔收不到问题
- 修复login回包无法解密问题
- 增加ip连接和login信息统计上报
- 修复消息seq错误

**Android平台**
- 修复android的jni泄漏
- 修复群组成员角色错误问题
- 修复退群在加群后，群组消息撤回崩溃问题
- 修复TUIKit Demo表情不显示问题
- 修复群聊会话获取消息，第二页大概率获取重复消息问题
- 修复TUIKit Demo中的部分crash问题
- 优化 TIMMessage 获取 senderProfile 拿不到用户资料信息的问题
- 修复已读回执回调及状态问题
- 修复同步未读消息最新一条消息不回调问题
- 修复群消息偶尔收不到问题
- 修复login回包无法解密问题
- 增加ip连接和login信息统计上报
- 修复消息seq错误

**Windows平台**
- 优化 TIMMessage 获取 senderProfile 拿不到用户资料信息的问题
- 修复已读回执回调及状态问题
- 修复同步未读消息最新一条消息不回调问题
- 修复群消息偶尔收不到问题
- 修复login回包无法解密问题
- 增加ip连接和login信息统计上报
- 修复消息seq错误



## 4.2.28 @2019.04.08

### iOS：

**bugfix：**

- 优化未读计数相关的问题
- 优化消息已读状态的问题
- 优化RESTAPI发的C2C消息排序异常的问题
- 优化获取漫游消息偶现重复的问题
- 优化uniqueId空实现的问题

### Android：

**新增：**

- 新增好友增/删/查逻辑


**bugfix：**

- 优化未读计数相关的问题

- 优化消息已读状态的问题
- 优化RESTAPI发的C2C消息排序异常的问题
- 优化获取漫游消息偶现重复的问题
- 优化uniqueId空实现的问题

### Windows：

**bugfix：**

- 优化未读计数相关的问题
- 优化消息已读状态的问题
- 优化RESTAPI发的C2C消息排序异常的问题
- 优化获取漫游消息偶现重复的问题

## 4.2.10 @2019.03.29

### iOS：
**新增：**

-    新增好友增/删/查逻辑


**bugfix：**

  - 优化超时问题
  - 优化自动登录逻辑
  - 优化crash问题
  - 优化偶现网络连接异常bug

### Android：

**bugfix：**

 - 优化超时问题
 - 优化自动登录逻辑
 - 优化JNI泄漏问题
 - 优化crash问题
 - 优化偶现网络连接异常bug

### Windows：

**bugfix：**

  - 优化超时问题
  - 优化crash问题
  - 优化偶现网络连接异常bug

## 4.2.9 @2019.03.27

### iOS & Mac：

**bugfix：**

- 修复ipv6环境下crash的问题
- 修复资料设置整数失败的问题

### Android：

**bugfix：**

- 修复资料设置整数失败的问题

## 4.2.1 @2019.03.15

### iOS:

- 调整项 优化后台解散群组, 客户端收不到相应指令的问题
- 修复项 调用 deleteConversationAndMessage() 无效
- 修复项 优化网络重新连接后收不到消息的问题 (现在网络重新连接后可以在会话界面主动请求拉取消息了)

### Android:

- 修复项 群组获取未决和已决信息返回不正确
- 修复项 客户端进入后台 Crash (现在 APP 进入后台不会直接 Crash 了)
- 修复项 优化网络重新连接后收不到消息的问题 (现在网络重新连接后可以在会话界面主动请求拉取消息了)
- 修复项 偶现消息排序错误
- 修复项 偶现消息发送失败

### WEB:

- 新增项 WEBIM 现已支持播放 .amr 的录音格式

### Windows:

- 新增项 /source-charset:.65001 编译选项
- 修复项 在文件系统直接运行 IMAPP.exe Crash 问题
- 修复项 部分编译出错, 以及 Crash 问题
- 移除项 X64 编译 (暂不支持)

## 4.0.13 @2019.03.13

### Android:

- 修复项 从 3.x 升级到 4.x 版本后登陆引起 Crash 的问题

### iOS:

- 新增项 支持 pod 直接集成 TUIKit.framework
- 修复项 从 3.x 升级到 4.x 版本后登陆引起 Crash 的问题

### Windows:

- 新增项 以 duilib 库为 UI 组件的 IM Demo
- 新增项 使用说明及相关集成指引文档

## 4.0.12 @2019.03.08
### Android:

- 修复项 群组禁言无效问题
- 修复项 修改用户群内身份功能
- 修复项 修改群消息接收选项
- 修复项 离线推送开关无效问题

### iOS:

- 新增项 TUIKit.framework 支持 bitcode 2
- 修复项 群组禁言无效问题
- 修复项 修改用户群内身份功能


## 4.0.10版本(Android端)

- 修复AVChatRoom进入房间超过100人之后收消息异常的问题

## 4.0.7版本

- 修复新老版本语音，文件，视频消息互通的问题
- 解决-5 tls exchange failed 卸载应用重新安装才能登录成功

## 4.0.6版本

- 解决userSig过期后重签仍然登陆失败问题

## 4.0.4版本

- 解决userSig过期后再次登录返回错误码不正确问题，应该返回6206；优化互踢逻辑

## 4.0.3版本

- 修复第三方离线推送问题

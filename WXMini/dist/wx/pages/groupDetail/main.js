require("../../common/manifest.js")
require("../../debug/GenerateTestUserSig.js")
require("../../common/vendor.js")
global.webpackJsonpMpvue([10],{"3g6o":function(t,e){},JAZu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("5nAL"),r=i.n(s),a=i("whLq");new r.a(a.a).$mount()},QaIq:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg"},[i("i-modal",{attrs:{title:"添加的用户ID",visible:t.addModalVisible,eventid:"1",mpcomid:"0"},on:{ok:t.handleAdd,cancel:t.handleModalShow}},[i("div",{staticClass:"input-wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model.lazy:value",value:t.addUserId,expression:"addUserId",modifiers:{"lazy:value":!0}}],staticClass:"input",attrs:{type:"text",eventid:"0"},domProps:{value:t.addUserId},on:{input:function(e){e.target.composing||(t.addUserId=e.target.value)}}})])]),t._v(" "),i("i-modal",{attrs:{title:"转让群组",visible:t.changeOwnerModal,eventid:"3",mpcomid:"3"},on:{ok:t.handleChangeOwner,cancel:t.changeGroupOwner}},[i("div",{staticClass:"input-wrapper"},[i("i-radio-group",{attrs:{current:t.current,eventid:"2",mpcomid:"2"},on:{change:t.handleChange}},t._l(t.groupProfile.memberList,function(e,s){return i("i-radio",{key:e.userID,attrs:{position:"left",value:e.userID,mpcomid:"1_"+s}},[t._v(t._s(e.userID)+"\n        ")])}))],1)]),t._v(" "),i("div",{staticClass:"card"},[i("i-row",{attrs:{mpcomid:"6"}},[i("i-col",{attrs:{span:"8",mpcomid:"4"}},[i("div",{staticClass:"avatar"},[i("image",{staticStyle:{width:"80px",height:"80px","border-radius":"8px"},attrs:{src:t.groupProfile.avatar||"/static/images/groups.png"}})])]),t._v(" "),i("i-col",{attrs:{span:"16",mpcomid:"5"}},[i("div",{staticClass:"right"},[i("div",{staticClass:"username"},[t._v(t._s(t.groupProfile.name))]),t._v(" "),i("div",{staticClass:"account"},[t._v("群ID："+t._s(t.groupProfile.groupID))])])])],1)],1),t._v(" "),i("div",{staticClass:"card",staticStyle:{"margin-top":"10px","padding-left":"20px","padding-right":"20px"}},[i("i-row",{attrs:{mpcomid:"9"}},[i("i-col",{attrs:{span:"22",mpcomid:"7"}},[i("div",{staticClass:"member"},[i("div",{staticClass:"member-list"},[t._v("\n            群成员\n          ")]),t._v(" "),"Private"===t.currentGroupProfile.type?i("div",{staticStyle:{"padding-left":"10px"},attrs:{eventid:"4"},on:{click:function(e){t.handleModalShow()}}},[i("image",{staticStyle:{width:"20px",height:"20px","border-radius":"50%"},attrs:{src:"/static/images/more.png"}})]):t._e()])]),t._v(" "),i("i-col",{attrs:{span:"2",mpcomid:"8"}},[i("div",{staticClass:"member",attrs:{eventid:"5"},on:{click:function(e){t.allMember()}}},[i("image",{staticStyle:{width:"20px",height:"20px","border-radius":"50%"},attrs:{src:"/static/images/right.png"}})])])],1)],1),t._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"item"},[i("div",{staticClass:"key"},[t._v("群介绍")]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.groupProfile.introduction||"未设置"))])])]),t._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"item"},[i("div",{staticClass:"key"},[t._v("群公告")]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.groupProfile.notification||"未设置"))])])]),t._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"item"},[i("div",{staticClass:"key"},[t._v("群类型")]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.groupProfile.type))])])]),t._v(" "),t.isOwner&&"AVChatRoom"!==t.groupProfile.type?i("div",{staticClass:"revise"},[i("button",{staticClass:"btn delete",attrs:{eventid:"6"},on:{click:t.changeGroupOwner}},[t._v("转让群组")])],1):t._e(),t._v(" "),"Public"!==t.groupProfile.type?i("div",{staticClass:"revise"},[i("button",{staticClass:"btn delete",attrs:{eventid:"7"},on:{click:t.quitGroup}},[t._v("退出群组")])],1):t._e(),t._v(" "),t.isOwner&&"Private"!==t.groupProfile.type?i("div",{staticClass:"revise"},[i("button",{staticClass:"btn delete",attrs:{eventid:"8"},on:{click:t.dismissGroup}},[t._v("解散群组")])],1):t._e()],1)},staticRenderFns:[]};e.a=s},mvpX:function(t,e,i){"use strict";var s=i("Dd8w"),r=i.n(s),a=i("NYxO");e.a={data:function(){return{groupProfile:{},addModalVisible:!1,isInBlacklist:!1,changeOwnerModal:!1,list:[],current:""}},onUnload:function(){this.groupProfile={}},computed:r()({},Object(a.b)({currentGroupProfile:function(t){return t.group.currentGroupProfile}}),{isMyRoleOwner:function(){return this.currentGroupProfile.selfInfo.role===this.$type.GRP_MBR_ROLE_OWNER},isMyRoleAdmin:function(){return this.currentGroupProfile.selfInfo.role===this.$type.GRP_MBR_ROLE_ADMIN}}),onShow:function(){this.getBlacklist(),this.groupProfile=this.$store.state.group.currentGroupProfile},methods:{dismissGroup:function(){var t=this;wx.$app.dismissGroup(this.groupProfile.groupID).then(function(e){e.data;t.$store.commit("showToast",{title:"群："+(t.groupProfile.name||t.groupProfile.groupID)+"解散成功！",type:"success"}),t.$store.commit("resetCurrentConversation"),t.$store.commit("resetGroup"),wx.switchTab({url:"../index/main"})})},changeGroupOwner:function(){this.changeOwnerModal=!this.changeOwnerModal},handleChange:function(t){this.current=t.target.value},handleChangeOwner:function(){var t=this;wx.$app.changeGroupOwner({groupID:this.groupProfile.groupID,newOwnerID:this.current}).then(function(){t.$store.commit("showToast",{title:"转让群组成功"}),t.changeGroupOwner()})},getBlacklist:function(){var t=this;wx.$app.getBlacklist().then(function(e){t.$store.commit("setBlacklist",e.data)})},allMember:function(){var t=this,e=this.$store.state.group.count;wx.$app.getGroupMemberList({groupID:this.currentGroupProfile.groupID,offset:0,count:e}).then(function(e){t.$store.commit("updateCurrentGroupMemberList",e.data.memberList),t.$store.commit("updateOffset");wx.navigateTo({url:"../members/main"})})},quitGroup:function(){var t=this;wx.$app.quitGroup(this.groupProfile.groupID).then(function(){t.$store.commit("showToast",{title:"退出成功",icon:"success",duration:1500}),t.$store.commit("resetCurrentConversation"),t.$store.commit("resetGroup"),wx.switchTab({url:"../index/main"})}).catch(function(e){console.warn("quitGroupFail",e),t.$store.commit("showToast",{title:"退出失败",icon:"none",duration:1500})})},handleModalShow:function(){this.addModalVisible=!this.addModalVisible},handleAdd:function(){var t=this,e=this.$store.state.conversation.currentConversationID;wx.$app.getUserProfile({userIDList:[this.addUserId]}).then(function(){wx.$app.addGroupMember({groupID:e.replace(t.TIM.TYPES.CONV_GROUP,""),userIDList:[t.addUserId]}).then(function(e){t.addUserId="",t.handleModalShow();var i=e.data.failureUserIDList,s=e.data.existedUserIDList,r=e.data.successUserIDList;i.length>0&&t.$store.commit("showToast",{title:"添加失败!再试试吧",icon:"none",duration:1500}),s.length>0&&t.$store.commit("showToast",{title:"已经在群里",icon:"none",duration:1500}),r.length>0&&t.$store.commit("showToast",{title:"添加成功",icon:"none",duration:1500})})}).catch(function(){t.$store.commit("showToast",{title:"没有找到该用户",icon:"none",duration:1500})})}},destory:function(){}}},whLq:function(t,e,i){"use strict";var s=i("mvpX"),r=i("QaIq");var a=function(t){i("3g6o")},o=i("ybqe")(s.a,r.a,a,"data-v-536d31bc",null);e.a=o.exports}},["JAZu"]);
<template name="7458312c">
  <view class="_div data-v-afeb3abc chat" id="chat" bindlongpress="handleProxy" bindtouchmove="handleProxy" bindtouchend="handleProxy" data-eventid="{{'25'}}" data-comkey="{{$k}}" style=" {{('padding-bottom:' + (isIpx ? safeBottom + 40 + 'px' : '40px') + ';')}}">
    <view class="_div data-v-afeb3abc nav" bindtap="handleProxy" data-eventid="{{'0'}}" data-comkey="{{$k}}"> 查看资料 </view>
    <view class="_div data-v-afeb3abc record-modal {{isRecording ? '' : 'modal-display'}}">
      <view class="_div data-v-afeb3abc wrapper">
        <view class="_div data-v-afeb3abc modal-loading"></view>
      </view>
      <view class="_div data-v-afeb3abc modal-title">
        {{title}}
      </view>
    </view>
    <i-modal title="确认下载？" visible="{{modalVisible}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'1'}}" data-comkey="{{$k}}" class="_i-modal data-v-afeb3abc">
      <view class="_div data-v-afeb3abc input-wrapper"> 进度{{percent}}% </view>
    </i-modal>
    <i-modal title="发送自定义消息" i-class="custom-modal" visible="{{customModalVisible}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'5'}}" data-comkey="{{$k}}" class="_i-modal data-v-afeb3abc">
      <view class="_div data-v-afeb3abc custom-wrapper"><input type="text" class="_input data-v-afeb3abc custom-input" placeholder="输入数据" value="{{customData}}" bindinput="handleProxy" data-eventid="{{'2'}}" data-comkey="{{$k}}" /> <input type="text" class="_input data-v-afeb3abc custom-input" placeholder="输入描述" value="{{customDescription}}" bindinput="handleProxy" data-eventid="{{'3'}}" data-comkey="{{$k}}" /> <input type="text" class="_input data-v-afeb3abc custom-input" placeholder="输入其他" value="{{customExtension}}" bindinput="handleProxy" data-eventid="{{'4'}}" data-comkey="{{$k}}" /></view>
    </i-modal>
    <i-modal title="对IM demo的评分和评价" i-class="custom-modal" visible="{{rateModal}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'8'}}" data-comkey="{{$k}}" class="_i-modal data-v-afeb3abc">
      <view class="_div data-v-afeb3abc custom-wrapper">
        <i-rate bindchange="handleProxy" value="{{rate}}" data-eventid="{{'6'}}" data-comkey="{{$k}}" class="_i-rate data-v-afeb3abc"></i-rate> <input type="text" class="_input data-v-afeb3abc custom-input" placeholder="输入评价" value="{{customExtension}}" bindinput="handleProxy" data-eventid="{{'7'}}" data-comkey="{{$k}}" />
      </view>
    </i-modal>
    <view id="list" bindtap="handleProxy" data-eventid="{{'14'}}" data-comkey="{{$k}}" class="_div data-v-afeb3abc">
      <view wx:key="message.ID" key="{{message.ID}}" id="{{message.ID}}" wx:for="{{currentMessageList}}" wx:for-index="index" wx:for-item="message" class="_li data-v-afeb3abc">
        <view class="_div data-v-afeb3abc notice" wx:if="{{message.type === 'TIMGroupTipElem' || message.type === 'TIMGroupSystemNoticeElem'}}">
          <view class="_div data-v-afeb3abc content"><label wx:key="message.ID + index1" key="{{message.ID + index1}}" wx:for="{{message.virtualDom}}" wx:for-index="index1" wx:for-item="div" class="_span data-v-afeb3abc"><label wx:if="{{div.name === 'groupTip' || 'system'}}" class="_span data-v-afeb3abc">{{div.text}}</label></label></view>
        </view>
        <view wx:else class="_div data-v-afeb3abc {{(message.flow === 'out') ? 'item-right' : 'item-left'}}">
          <view class="_div data-v-afeb3abc load" bindtap="handleProxy" data-eventid="{{'9_'+index}}" data-comkey="{{$k}}">
            <view class="_div data-v-afeb3abc {{message.status}}"></view>
          </view>
          <view class="_div data-v-afeb3abc content">
            <view class="_div data-v-afeb3abc name">
              {{message.nick || message.from}}
            </view>
            <view class="_div data-v-afeb3abc message" wx:if="{{message.type === 'TIMTextElem'}}">
              <view class="_div data-v-afeb3abc text-message"><label wx:key="message.ID + index2" key="{{message.ID + index2}}" wx:for="{{message.virtualDom}}" wx:for-index="index2" wx:for-item="div" class="_span data-v-afeb3abc"><label wx:if="{{div.name === 'span'}}" class="_span data-v-afeb3abc">{{div.text}}</label>
                  <image wx:if="{{div.name === 'img'}}" src="{{div.src}}" style="width:20px;height:20px;" class="_image data-v-afeb3abc"></image>
                </label></view>
            </view>
            <view class="_div data-v-afeb3abc message" wx:elif="{{message.type === 'TIMImageElem'}}" bindtap="handleProxy" data-eventid="{{'10_'+index}}" data-comkey="{{$k}}">
              <image class="_image data-v-afeb3abc img" src="{{message.payload.imageInfoArray[1].url}}" mode="aspectFit" style="max-width:200px;height:150px"></image>
            </view>
            <view class="_div data-v-afeb3abc message" wx:elif="{{message.type === 'TIMFileElem'}}">
              <view class="_div data-v-afeb3abc file" bindtap="handleProxy" data-eventid="{{'11_'+index}}" data-comkey="{{$k}}">
                <i-avatar src="../../../static/images/file.png" size="large" shape="square" class="_i-avatar data-v-afeb3abc"></i-avatar>
                <view class="_div data-v-afeb3abc">{{message.payload.fileName}}</view>
              </view>
            </view>
            <view class="_div data-v-afeb3abc message" wx:elif="{{message.type === 'TIMCustomElem'}}">
              <view wx:if="{{message.payload.data === 'survey'}}" class="_div data-v-afeb3abc survey">
                <view class="_div data-v-afeb3abc title"> 对IM DEMO的评分和建议 </view>
                <view class="_div data-v-afeb3abc description">
                  <i-rate disabled="true" value="{{message.payload.description}}" class="_i-rate data-v-afeb3abc"></i-rate>
                </view>
                <view class="_div data-v-afeb3abc suggestion">
                  <view class="_div data-v-afeb3abc">{{message.payload.extension}}</view>
                </view>
              </view>
              <view wx:elif="{{message.payload.data === 'group_create'}}" class="_div data-v-afeb3abc">
                <view class="_div data-v-afeb3abc">{{message.payload.extension}}</view>
              </view>
              <view wx:else class="_div data-v-afeb3abc custom-elem">这是自定义消息</view>
            </view>
            <view class="_div data-v-afeb3abc message" wx:elif="{{message.type === 'TIMSoundElem'}}" url="{{message.payload.url}}">
              <view class="_div data-v-afeb3abc box" bindtap="handleProxy" data-eventid="{{'12_'+index}}" data-comkey="{{$k}}">
                <image src="/static/images/audio.png" style="height:20px;width:14px" class="_image data-v-afeb3abc"></image>
                <view style="padding-left: 10px" class="_div data-v-afeb3abc">{{message.payload.second}}s</view>
              </view>
            </view>
            <view class="_div data-v-afeb3abc message" wx:elif="{{message.type === 'TIMFaceElem'}}">
              <view class="_div data-v-afeb3abc custom-elem">
                <image src="{{'https://webim-1252463788.file.myqcloud.com/assets/face-elem/' + message.payload.data + '.png'}}" style="height:90px; width:90px" class="_image data-v-afeb3abc"></image>
              </view>
            </view>
            <view class="_div data-v-afeb3abc message" wx:elif="{{message.type === 'TIMVideoFileElem'}}"><video src="{{message.payload.videoUrl}}" class="_video data-v-afeb3abc video" poster="{{message.payload.thumbUrl}}" object-fit="contain" binderror="handleProxy" data-eventid="{{'13_'+index}}" data-comkey="{{$k}}"></video></view>
          </view>
          <view class="_div data-v-afeb3abc avatar">
            <i-avatar src="{{message.avatar || '../../../static/images/header.png'}}" shape="square" class="_i-avatar data-v-afeb3abc"></i-avatar>
          </view>
        </view>
      </view>
    </view>
    <view class="_div data-v-afeb3abc bottom" style=" {{('padding-bottom:' + (isIpx ? safeBottom + 'px' : '') + ';')}}">
      <view class="_div data-v-afeb3abc bottom-div">
        <view class="_div data-v-afeb3abc btn" bindtap="handleProxy" data-eventid="{{'15'}}" data-comkey="{{$k}}">
          <image src="/static/images/record.png" class="_image data-v-afeb3abc btn-small"></image>
        </view>
        <view wx:if="{{!isRecord}}" style="width: 80%" class="_div data-v-afeb3abc"><input type="text" class="_input data-v-afeb3abc input" value="{{messageContent}}" bindinput="handleProxy" confirm-type="send" focus="{{isFocus}}" bindconfirm="handleProxy" data-eventid="{{'16'}}" data-comkey="{{$k}}" /></view>
        <view class="_div data-v-afeb3abc record" id="record" wx:if="{{isRecord}}">
          <block wx:if="{{!isRecording}}"> 长按进行录音 </block>
          <block wx:if="{{isRecording}}"> 抬起停止录音 </block>
        </view>
        <view class="_div data-v-afeb3abc btn" bindtap="handleProxy" data-eventid="{{'17'}}" data-comkey="{{$k}}">
          <image src="/static/images/emoji.png" class="_image data-v-afeb3abc btn-small"></image>
        </view>
        <view class="_div data-v-afeb3abc btn" bindtap="handleProxy" data-eventid="{{'18'}}" data-comkey="{{$k}}">
          <image src="/static/images/plus.png" class="_image data-v-afeb3abc btn-small"></image>
        </view>
      </view>
      <view class="_div data-v-afeb3abc bottom-emoji" wx:if="{{isEmojiOpen}}">
        <view class="_div data-v-afeb3abc emojis">
          <view class="_div data-v-afeb3abc emoji" wx:key="emojiItem" key="{{emojiItem}}" bindtap="handleProxy" data-eventid="{{'19_'+index3}}" data-comkey="{{$k}}" wx:for="{{emojiName}}" wx:for-index="index3" wx:for-item="emojiItem">
            <image src="{{emojiUrl + emojiMap[emojiItem]}}" style="width:25px;height:25px" class="_image data-v-afeb3abc"></image>
          </view>
        </view>
        <view class="_div data-v-afeb3abc emoji-tab">
          <i-row class="_i-row data-v-afeb3abc">
            <i-col span="21" class="_i-col data-v-afeb3abc">
              <view style="line-height: 26px" class="_div data-v-afeb3abc"> 😄 </view>
            </i-col>
            <i-col span="3" class="_i-col data-v-afeb3abc">
              <view class="_div data-v-afeb3abc sending" bindtap="handleProxy" data-eventid="{{'20'}}" data-comkey="{{$k}}">发送</view>
            </i-col>
          </i-row>
        </view>
      </view>
      <view class="_div data-v-afeb3abc bottom-image" wx:if="{{isMoreOpen}}">
        <view class="_div data-v-afeb3abc images">
          <view class="_div data-v-afeb3abc block" bindtap="handleProxy" data-eventid="{{'21'}}" data-comkey="{{$k}}">
            <view class="_div data-v-afeb3abc image">
              <image src="/static/images/image.png" class="_image data-v-afeb3abc icon"></image>
            </view>
            <view class="_div data-v-afeb3abc name"> 图片 </view>
          </view>
          <view class="_div data-v-afeb3abc block" bindtap="handleProxy" data-eventid="{{'22'}}" data-comkey="{{$k}}">
            <view class="_div data-v-afeb3abc image">
              <image src="/static/images/photo.png" class="_image data-v-afeb3abc icon"></image>
            </view>
            <view class="_div data-v-afeb3abc name"> 拍照 </view>
          </view>
          <view class="_div data-v-afeb3abc block" bindtap="handleProxy" data-eventid="{{'23'}}" data-comkey="{{$k}}">
            <view class="_div data-v-afeb3abc image">
              <image src="/static/images/define.png" class="_image data-v-afeb3abc icon"></image>
            </view>
            <view class="_div data-v-afeb3abc name"> 自定义 </view>
          </view>
          <view class="_div data-v-afeb3abc block" bindtap="handleProxy" data-eventid="{{'24'}}" data-comkey="{{$k}}">
            <view class="_div data-v-afeb3abc image">
              <image src="/static/images/dice.png" class="_image data-v-afeb3abc icon"></image>
            </view>
            <view class="_div data-v-afeb3abc name"> 评分 </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</template>
require("../../common/manifest.js")
require("../../debug/GenerateTestUserSig.js")
require("../../common/vendor.js")
global.webpackJsonpMpvue([2],{BBly:function(t,e,s){"use strict";var i=o(s("5nAL")),a=o(s("MCpR"));function o(t){return t&&t.__esModule?t:{default:t}}new i.default(a.default).$mount()},MCpR:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("bld3"),a=s.n(i),o=s("nzGZ");var n=function(t){s("YkIb")},l=s("ybqe")(a.a,o.a,n,null,null);e.default=l.exports},YkIb:function(t,e){},bld3:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(s("mvHQ")),a=n(s("Dd8w")),o=s("NYxO");function n(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{userProfile:{},isInBlacklist:!1}},computed:(0,a.default)({},(0,o.mapState)({blacklist:function(t){return t.user.blacklist}}),(0,o.mapGetters)(["isIphoneX"])),onLoad:function(t){var e=this,s=t.userID;t.groupID;s&&(this.blacklist.indexOf(s)>-1&&(this.isInBlacklist=!0),wx.$app.getUserProfile({userIDList:[s]}).then(function(t){e.userProfile=t.data[0]}))},onUnload:function(){this.userProfile={},this.isInBlacklist=!1},methods:{getRandomInt:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},videoCall:function(){var t={call_id:"",version:3,room_id:this.getRandomInt(0,42949),action:0,duration:0,invited_list:[]},e=(0,i.default)(t),s=wx.$app.createCustomMessage({to:this.userProfile.userID,conversationType:"C2C",payload:{data:e,description:"",extension:""}});this.$store.commit("sendMessage",s),wx.$app.sendMessage(s);var a="../call/main?args="+e+"&&from="+s.from+"&&to="+s.to;wx.navigateTo({url:a})},sendMessage:function(){this.$store.dispatch("checkoutConversation","C2C"+this.userProfile.userID)},handleSwitch:function(t){t.mp.detail.value?this.addBlackList():this.deleteBlackList()},addBlackList:function(){var t=this;wx.$app.addToBlacklist({userIDList:[this.userProfile.userID]}).then(function(e){t.$store.commit("showToast",{title:"拉黑成功",icon:"none",duration:1500}),t.isInBlacklist=!0,t.$store.commit("setBlacklist",e.data)}).catch(function(){t.$store.commit("showToast",{title:"拉黑失败",icon:"none",duration:1500})})},deleteBlackList:function(){var t=this;wx.$app.removeFromBlacklist({userIDList:[this.userProfile.userID]}).then(function(e){t.$store.commit("showToast",{title:"取消拉黑成功",icon:"none",duration:1500}),t.$store.commit("setBlacklist",e.data),t.isInBlacklist=!1}).catch(function(){t.$store.commit("showToast",{title:"取消拉黑失败",icon:"none",duration:1500})})}}}},nzGZ:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"info-card"},[s("i-avatar",{attrs:{"i-class":"avatar",src:t.userProfile.avatar,mpcomid:"0"}}),t._v(" "),s("div",{staticClass:"basic"},[s("div",{staticClass:"username"},[t._v(t._s(t.userProfile.nick||"未设置"))]),t._v(" "),s("div",{staticClass:"user-id"},[t._v("用户ID："+t._s(t.userProfile.userID))])])],1),t._v(" "),s("i-cell-group",{attrs:{"i-class":"cell-group",mpcomid:"2"}},[s("i-cell",{attrs:{title:"个性签名",mpcomid:"1"}},[s("div",{staticClass:"signature",slot:"footer"},[t._v("\n        "+t._s(t.userProfile.selfSignature||"暂无")+"\n      ")])])],1),t._v(" "),s("i-cell-group",{attrs:{"i-class":"cell-group",mpcomid:"4"}},[s("i-cell",{attrs:{title:"加入黑名单",mpcomid:"3"}},[s("switch",{attrs:{color:"#006fff",checked:t.isInBlacklist,eventid:"0"},on:{change:t.handleSwitch},slot:"footer"})])],1),t._v(" "),s("div",{staticClass:"action-list",style:{"margin-bottom":t.isIphoneX?"34px":0}},[s("button",{staticClass:"video-call",attrs:{eventid:"1"},on:{click:t.videoCall}},[t._v("\n      音视频通话\n      "),s("div",{staticClass:"new-badge"},[t._v("NEW")])]),t._v(" "),s("button",{staticClass:"send-messsage",attrs:{eventid:"2"},on:{click:t.sendMessage}},[t._v("发送消息")])],1)],1)},staticRenderFns:[]};e.a=i}},["BBly"]);
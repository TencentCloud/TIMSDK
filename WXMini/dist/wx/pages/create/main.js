require("../../common/manifest.js")
require("../../debug/GenerateTestUserSig.js")
require("../../common/vendor.js")
global.webpackJsonpMpvue([13],{"GU/c":function(t,e,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("i-modal",{attrs:{title:"添加的用户ID",visible:t.addModalVisible,eventid:"1",mpcomid:"0"},on:{ok:t.handleAdd,cancel:t.handleModalShow}},[i("div",{staticClass:"input-wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model.lazy:value",value:t.addUserId,expression:"addUserId",modifiers:{"lazy:value":!0}}],staticClass:"input border center",attrs:{type:"text",eventid:"0"},domProps:{value:t.addUserId},on:{input:function(e){e.target.composing||(t.addUserId=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"title"},[t._v("基础信息")]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("\n        群ID：\n      ")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model.lazy:value",value:t.id,expression:"id",modifiers:{"lazy:value":!0}}],staticClass:"input",attrs:{type:"text",placeholder:"请输入群ID",eventid:"2"},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("\n        群名：\n      ")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model.lazy:value",value:t.name,expression:"name",modifiers:{"lazy:value":!0}}],staticClass:"input",attrs:{type:"text",placeholder:"请输入群名",eventid:"3"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("\n        群头像：\n      ")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model.lazy:value",value:t.avatar,expression:"avatar",modifiers:{"lazy:value":!0}}],staticClass:"input",attrs:{type:"text",placeholder:"请输入群头像",eventid:"4"},domProps:{value:t.avatar},on:{input:function(e){e.target.composing||(t.avatar=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("\n        群简介：\n      ")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model.lazy:value",value:t.introduction,expression:"introduction",modifiers:{"lazy:value":!0}}],staticClass:"input",attrs:{type:"text",placeholder:"请输入群简介",eventid:"5"},domProps:{value:t.introduction},on:{input:function(e){e.target.composing||(t.introduction=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("\n        群公告：\n      ")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model.lazy:value",value:t.notice,expression:"notice",modifiers:{"lazy:value":!0}}],staticClass:"input",attrs:{type:"text",placeholder:"请输入群公告",eventid:"6"},domProps:{value:t.notice},on:{input:function(e){e.target.composing||(t.notice=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"type"},[i("div",{staticClass:"title"},[t._v("\n        群类型：\n      ")]),t._v(" "),i("div",{staticClass:"choose"},[i("i-radio-group",{attrs:{current:t.currentType,eventid:"7",mpcomid:"5"},on:{change:t.handleTypeChange}},[i("i-radio",{attrs:{value:"Private",mpcomid:"1"}}),t._v(" "),i("i-radio",{attrs:{value:"Public",mpcomid:"2"}}),t._v(" "),i("i-radio",{attrs:{value:"ChatRoom",mpcomid:"3"}}),t._v(" "),i("i-radio",{attrs:{value:"AVChatRoom",mpcomid:"4"}})],1)],1)]),t._v(" "),"Private"!==t.currentType&&"AVChatRoom"!==t.currentType?i("div",{staticClass:"type"},[i("div",{staticClass:"title"},[t._v("\n        加群方式：\n      ")]),t._v(" "),i("div",{staticClass:"choose"},[i("i-radio-group",{attrs:{current:t.addType,eventid:"8",mpcomid:"9"},on:{change:t.handleAddTypeChange}},[i("i-radio",{attrs:{value:"自由加群",mpcomid:"6"}}),t._v(" "),i("i-radio",{attrs:{value:"需要验证",mpcomid:"7"}}),t._v(" "),i("i-radio",{attrs:{value:"禁止加群",mpcomid:"8"}})],1)],1)]):t._e(),t._v(" "),i("div",{staticClass:"type"},[i("div",{staticClass:"title"},[t._v("\n        群成员列表"),i("span",{staticClass:"adding",attrs:{eventid:"9"},on:{click:t.handleModalShow}},[t._v("添加成员")])])]),t._v(" "),0===t.memberList.length?i("div",{staticClass:"temp"}):t._e(),t._v(" "),t._l(t.memberList,function(e,a){return i("div",{key:e.userID,staticClass:"item"},[i("div",{staticClass:"add-label"},[t._v("\n        "+t._s(e.nick||"无昵称")+"\n      ")]),t._v(" "),i("div",{staticClass:"add-label"},[t._v("\n        "+t._s(e.userID)+"\n      ")]),t._v(" "),i("div",{staticClass:"delete",attrs:{eventid:"10_"+a},on:{click:function(i){t.deleteMember(e)}}},[i("i-avatar",{attrs:{src:"../../../static/images/delete.png",mpcomid:"10_"+a}})],1)])}),t._v(" "),i("i-row",{attrs:{mpcomid:"12"}},[i("i-col",{attrs:{span:"24",mpcomid:"11"}},[i("button",{staticClass:"button success",attrs:{type:"button",eventid:"11"},on:{click:t.createGroup}},[t._v("确定创建")]),t._v(" "),i("button",{staticClass:"button fail",attrs:{type:"button",eventid:"12"},on:{click:t.empty}},[t._v("清空")])],1)],1)],2)},staticRenderFns:[]};e.a=a},TIXD:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("5nAL"),s=i.n(a),n=i("qy7V");new s.a(n.a).$mount()},gQ1t:function(t,e){},qy7V:function(t,e,i){"use strict";var a=i("xNvV"),s=i("GU/c");var n=function(t){i("gQ1t")},o=i("ybqe")(a.a,s.a,n,"data-v-e2ba38f4",null);e.a=o.exports},xNvV:function(t,e,i){"use strict";e.a={data:function(){return{id:"",name:"",content:"",currentType:this.$type.GRP_PRIVATE,avatar:"",introduction:"",notice:"",addType:"自由加群",memberList:[],addModalVisible:!1,addUserId:""}},computed:{username:function(){return this.$store.state.user.userProfile.to}},methods:{createGroup:function(){var t=this;if(this.name){var e=this.memberList.map(function(t){return{userID:t.userID}}),i=void 0;switch(this.addType){case"自由加群":i=this.$type.JOIN_OPTIONS_FREE_ACCESS;break;case"禁止加群":i=this.$type.JOIN_OPTIONS_DISABLE_APPLY;break;case"需要验证":i=this.$type.JOIN_OPTIONS_NEED_PERMISSION}var a=void 0;this.currentType!==this.TIM.TYPES.GRP_PRIVATE&&this.currentType!==this.TIM.TYPES.GRP_AVCHATROOM?(i=this.currentType===this.TIM.TYPES.GRP_AVCHATROOM?this.$type.JOIN_OPTIONS_FREE_ACCESS:i,a={groupID:this.id,name:this.name,type:this.currentType,avatar:this.avatar,introduction:this.introduction,notification:this.notice,joinOption:i,memberList:e}):a={groupID:this.id,name:this.name,type:this.currentType,avatar:this.avatar,introduction:this.introduction,notification:this.notice,memberList:e},wx.$app.createGroup(a).then(function(){t.$store.commit("showToast",{title:"创建成功",icon:"success",duration:1500}),t.empty(),wx.switchTab({url:"../index/main"})}).catch(function(t){console.log(t)})}else this.$store.commit("showToast",{title:"请输入群名"})},handleTypeChange:function(t){this.currentType=t.target.value},handleAddTypeChange:function(t){this.addType=t.target.value},handleModalShow:function(){this.addModalVisible=!this.addModalVisible},handleAdd:function(){var t=this;this.addUserId?wx.$app.getUserProfile({userIDList:[this.addUserId]}).then(function(e){t.addUserId="",e.data.length>0?(t.handleModalShow(),t.memberList.push(e.data[0]),t.$store.commit("showToast",{title:"添加成功",icon:"none",duration:1500})):t.$store.commit("showToast",{title:"没有找到该用户",icon:"none",duration:1500})}).catch(function(){t.$store.commit("showToast",{title:"没有找到该用户",icon:"none",duration:1500})}):this.$store.commit("showToast",{title:"ID不能为空"})},deleteMember:function(t){this.memberList=this.memberList.filter(function(e){return e.userID!==t.userID})},empty:function(){this.id="",this.name="",this.currentType="",this.avatar="",this.introduction="",this.notice="",this.addType="",this.memberList=[],this.addModalVisible=!1}}}}},["TIXD"]);
<template name="f155b86e"><view class="_div data-v-6ebb76b6 chatting"><view wx:if="{{allConversation.length === 0}}" class="_div data-v-6ebb76b6 empty"><button type="button" class="_button data-v-6ebb76b6 empty-button" bindtap="handleProxy" data-eventid="{{'0'}}" data-comkey="{{$k}}">发起会话</button></view> <view class="_div data-v-6ebb76b6 chat" wx:key="item.conversationID" key="{{item.conversationID}}" wx:for="{{allConversation}}" wx:for-index="index" wx:for-item="item"><i-modal title="确认删除会话？" visible="{{modalVisible}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'1_'+index}}" data-comkey="{{$k}}" class="_i-modal data-v-6ebb76b6"></i-modal> <view bindlongpress="handleProxy" data-eventid="{{'5_'+index}}" data-comkey="{{$k}}" class="_div data-v-6ebb76b6"><i-row wx:if="{{item.type === 'C2C'}}" bindtap="handleProxy" slot="content" data-eventid="{{'4_'+index}}" data-comkey="{{$k}}" class="_i-row data-v-6ebb76b6"><i-col span="4" class="_i-col data-v-6ebb76b6"><view class="_div data-v-6ebb76b6 avatar"><i-avatar src="{{item.userProfile.avatar || '/static/images/header.png'}}" size="large" shape="square" class="_i-avatar data-v-6ebb76b6"></i-avatar></view></i-col> <i-col span="20" class="_i-col data-v-6ebb76b6"><view class="_div data-v-6ebb76b6 right"><view class="_div data-v-6ebb76b6 information"><view class="_div data-v-6ebb76b6 username">{{item.userProfile.nick || item.userProfile.userID}}</view> <view class="_div data-v-6ebb76b6 last">{{item.lastMessage._lastTime}}</view></view> <view class="_div data-v-6ebb76b6 information"><view class="_div data-v-6ebb76b6 content">{{item.lastMessage.messageForShow}}</view> <view class="_div data-v-6ebb76b6 remain" wx:if="{{item.unreadCount > 0}}"><block wx:if="{{item.unreadCount > 99}}">
                  99+
                </block><block wx:else>
                  {{item.unreadCount}}
                </block></view></view></view></i-col></i-row><i-row wx:elif="{{item.type === 'GROUP'}}" bindtap="handleProxy" slot="content" data-eventid="{{'2_'+index}}" data-comkey="{{$k}}" class="_i-row data-v-6ebb76b6"><i-col span="4" class="_i-col data-v-6ebb76b6"><view class="_div data-v-6ebb76b6 avatar"><i-avatar src="{{item.groupProfile.avatar || '/static/images/groups.png'}}" size="large" shape="square" class="_i-avatar data-v-6ebb76b6"></i-avatar></view></i-col> <i-col span="20" class="_i-col data-v-6ebb76b6"><view class="_div data-v-6ebb76b6 right"><view class="_div data-v-6ebb76b6 information"><view class="_div data-v-6ebb76b6 username">{{item.groupProfile.name || item.groupProfile.groupID}}</view> <view class="_div data-v-6ebb76b6 last">{{item.lastMessage._lastTime}}</view></view> <view class="_div data-v-6ebb76b6 information"><view class="_div data-v-6ebb76b6 content" wx:if="{{item.lastMessage.fromAccount === '@TIM#SYSTEM'}}">{{item.lastMessage.messageForShow}}</view><view class="_div data-v-6ebb76b6 content" wx:elif="{{item.lastMessage.type === 'TIMCustomElem'}}">[自定义消息]</view><view class="_div data-v-6ebb76b6 content-red" wx:elif="{{item.lastMessage.at && item.unreadCount > 0}}">[有人@你了]</view><view class="_div data-v-6ebb76b6 content" wx:else>{{item.lastMessage.fromAccount}}：{{item.lastMessage.messageForShow}}</view> <view class="_div data-v-6ebb76b6 remain" wx:if="{{item.unreadCount > 0}}"><block wx:if="{{item.unreadCount > 99}}">
                  99+
                </block><block wx:else>
                  {{item.unreadCount}}
                </block></view></view></view></i-col></i-row><i-row wx:elif="{{item.type === '@TIM#SYSTEM'}}" bindtap="handleProxy" slot="content" data-eventid="{{'3_'+index}}" data-comkey="{{$k}}" class="_i-row data-v-6ebb76b6"><i-col span="4" class="_i-col data-v-6ebb76b6"><view class="_div data-v-6ebb76b6 avatar"><i-avatar src="../../../static/images/system.png" size="large" shape="square" class="_i-avatar data-v-6ebb76b6"></i-avatar></view></i-col> <i-col span="20" class="_i-col data-v-6ebb76b6"><view class="_div data-v-6ebb76b6 right"><view class="_div data-v-6ebb76b6 information"><view class="_div data-v-6ebb76b6 username">系统通知</view> <view class="_div data-v-6ebb76b6 remain" wx:if="{{item.unreadCount > 0}}">{{item.unreadCount}}</view></view> <view class="_div data-v-6ebb76b6 information"><view class="_div data-v-6ebb76b6 content">点击查看</view></view></view></i-col></i-row></view></view></view></template>